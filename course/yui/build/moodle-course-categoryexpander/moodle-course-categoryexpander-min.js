YUI.add("moodle-course-categoryexpander",function(e,t){var n={COURSES:".courses",LISTENLINK:".category_name",PARENTWITHCHILDREN:"div.category",SUBCATEGORIES:".subcategories"},r={COURSES:"courses",LOADED:"loaded",NOTLOADED:"notloaded",SECTIONCOLLAPSED:"collapsed",SUBCATEGORIES:"subcategories",HASCHILDREN:"with_children"},i=2,s=4;M.course=M.course||{},M.course.categoryexpander=M.course.categoryexpander||{init:function(){e.one(e.config.doc).delegate("click",this.toggle_expansion,n.LISTENLINK,this),this.init=function(){}},toggle_expansion:function(t){var i,o,u;t.preventDefault(),i=t.target.ancestor(n.PARENTWITHCHILDREN,!0);if(!i.hasClass(r.HASCHILDREN))return;if(i.hasClass(r.NOTLOADED)){o=i.getData("categoryid"),u=i.getData("depth");if(typeof o=="undefined"||typeof u=="undefined")return;e.io(M.cfg.wwwroot+"/course/category.ajax.php",{method:"POST",context:this,on:{complete:this.handle_category_results},data:{type:s,categoryid:o,depth:u},arguments:{categorynode:i}})}else i.toggleClass(r.SECTIONCOLLAPSED)},handle_category_results:function(t,i,s){var o,u,a,f;try{f=e.JSON.parse(i.responseText);if(f.error)return new M.core.ajaxException(f)}catch(l){return new M.core.exception(l)}a=e.Node.create(f),s.categorynode.addClass(r.LOADED).removeClass(r.NOTLOADED),o=a.one(n.SUBCATEGORIES),o&&(o.hide(),s.categorynode.appendChild(o),o.show()),u=a.one(n.COURSES),u&&(u.hide(),s.categorynode.appendChild(u),u.transition({duration:5,easing:"ease-out",opacity:{delay:1.5,duration:1.25,value:1}}),u.show())}}},"@VERSION@",{requires:["node","io-base","json-parse","moodle-core-notification","transition"]});
