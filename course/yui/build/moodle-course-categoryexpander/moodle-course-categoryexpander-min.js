YUI.add("moodle-course-categoryexpander",function(e,t){var n={CATEGORYCHILDREN:"div.category_children",CATEGORYLABEL:".category_label",COURSES:".courses",LISTENLINK:".category_name",PARENTWITHCHILDREN:"div.category",SUBCATEGORIES:".subcategories"},r={CATEGORYCHILDREN:"category_children",COURSES:"courses",LOADED:"loaded",NOTLOADED:"notloaded",SECTIONCOLLAPSED:"collapsed",SUBCATEGORIES:"subcategories",HASCHILDREN:"with_children"},i=4;M.course=M.course||{},M.course.categoryexpander=M.course.categoryexpander||{init:function(){e.one(e.config.doc).delegate("click",this.toggle_expansion,n.LISTENLINK,this),this.init=function(){}},toggle_expansion:function(t){var s,o,u;if(t.target.test("a")||t.target.test("img"))return;s=t.target.ancestor(n.PARENTWITHCHILDREN,!0);if(!s.hasClass(r.HASCHILDREN))return;if(s.hasClass(r.NOTLOADED)){o=s.getData("categoryid"),u=s.getData("depth");if(typeof o=="undefined"||typeof u=="undefined")return;e.io(M.cfg.wwwroot+"/course/category.ajax.php",{method:"POST",context:this,on:{complete:this.handle_category_results},data:{type:i,categoryid:o,depth:u,showcourses:s.getData("showcourses")},arguments:{categorynode:s}})}else this.apply_animation(s)},apply_animation:function(e){var t=e.one(n.CATEGORYCHILDREN);this.add_animator(t),e.hasClass(r.SECTIONCOLLAPSED)?(e.removeClass(r.SECTIONCOLLAPSED),t.fx.set("reverse",!1),t.fx.run()):(t.fx.set("reverse",!0),t.fx.once("end",function(){this.addClass(r.SECTIONCOLLAPSED)},e),t.fx.run())},handle_category_results:function(t,i,s){var o,u,a;try{a=e.JSON.parse(i.responseText);if(a.error)return new M.core.ajaxException(a)}catch(f){return new M.core.exception(f)}o=e.Node.create(a),s.categorynode.addClass(r.LOADED).removeClass(r.NOTLOADED),o.one(n.CATEGORYLABEL).remove(),u=s.categorynode.one(n.CATEGORYCHILDREN),u.appendChild(o),this.apply_animation(s.categorynode)},add_animator:function(t){if(typeof t.fx!="undefined")return;return t.plug(e.Plugin.NodeFX,{from:{height:0,opacity:0},to:{height:function(e){return e.get("scrollHeight")},opacity:1},easing:e.Easing.easeOut,duration:.3}),t}}},"@VERSION@",{requires:["node","io-base","json-parse","moodle-core-notification","anim"]});
