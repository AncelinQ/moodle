define("core_message/message_drawer_view_contacts_section_contacts",["jquery","core/notification","core/pubsub","core/templates","core_message/message_repository","core_message/message_drawer_events","core_message/message_drawer_lazy_load_list"],function(a,b,c,d,e,f,g){var h=0,i={BLOCK_ICON_CONTAINER:"[data-region=\"block-icon-container\"]",CONTACT:"[data-region=\"contact\"]",CONTENT_CONTAINER:"[data-region=\"contacts-content-container\"]"},j={CONTACTS_LIST:"core_message/message_drawer_contacts_list"},k=function(a,b){return a.find("[data-contact-user-id=\""+b+"\"]")},l=function(c,e){var f=e.map(function(b){return a.extend(b,{id:b.userid})});return d.render(j.CONTACTS_LIST,{contacts:f}).then(function(a){c.append(a);return a}).catch(b.exception)},m=function(a,c){return e.getContacts(c,101,h).then(function(a){return a}).then(function(b){if(b.length>100){b.pop()}else{g.setLoadedAll(a,!0)}return b}).then(function(a){h=h+100;return a}).catch(b.exception)},n=function(a,b){k(a,b).remove()},o=function(a,b){var c=k(a,b);if(c.length){c.find(i.BLOCK_ICON_CONTAINER).removeClass("hidden")}},p=function(a,b){var c=k(a,b);if(c.length){c.find(i.BLOCK_ICON_CONTAINER).addClass("hidden")}},q=function(a){c.subscribe(f.CONTACT_ADDED,function(b){var c=g.getContentContainer(a);l(c,[b]);g.hideEmptyMessage(a);g.showContent(a)});c.subscribe(f.CONTACT_REMOVED,function(b){n(a,b);var c=a.find(i.CONTACT);if(!c.length){g.hideContent(a);g.showEmptyMessage(a)}});c.subscribe(f.CONTACT_BLOCKED,function(b){o(a,b)});c.subscribe(f.CONTACT_UNBLOCKED,function(b){p(a,b)})};return{show:function b(a){if(!a.attr("data-contacts-init")){q(a);a.attr("data-contacts-init",!0)}g.show(a,m,l)}}});
//# sourceMappingURL=message_drawer_view_contacts_section_contacts.es6.js.map
