define("core_message/preferences_notifications_list_controller",["jquery","core/ajax","core/notification","core/custom_interaction_events","core_message/notification_preference","core_message/notification_processor_settings"],function(a,b,c,d,f,g){var h={DISABLE_NOTIFICATIONS:"[data-region=\"disable-notification-container\"] [data-disable-notifications]",DISABLE_NOTIFICATIONS_CONTAINER:"[data-region=\"disable-notification-container\"]",PREFERENCE:"[data-state]",PREFERENCE_ROW:"[data-region=\"preference-row\"]",PREFERENCE_INPUT:"[data-state] input",PROCESSOR_SETTING:"[data-processor-setting]"},e=function(b){this.root=a(b);this.userId=this.root.attr("data-user-id");this.registerEventListeners()};e.prototype.isDisabled=function(){return this.root.hasClass("disabled")};e.prototype.setDisabled=function(){this.root.addClass("disabled");this.root.find(h.PREFERENCE_INPUT).prop("disabled",!0)};e.prototype.setEnabled=function(){this.root.removeClass("disabled");this.root.find(h.PREFERENCE_INPUT).prop("disabled",!1)};e.prototype.toggleDisableAllStatus=function(){var d=a(h.DISABLE_NOTIFICATIONS),e=a(h.DISABLE_NOTIFICATIONS_CONTAINER),f=d.prop("checked");if(e.hasClass("loading")){return a.Deferred().resolve()}e.addClass("loading");var g={methodname:"core_user_update_user_preferences",args:{userid:this.userId,emailstop:f?1:0}};return b.call([g])[0].done(function(){if(f){this.setDisabled()}else{this.setEnabled()}}.bind(this)).always(function(){e.removeClass("loading")}).fail(c.exception)};e.prototype.registerEventListeners=function(){var b=a(h.DISABLE_NOTIFICATIONS);d.define(this.root,[d.events.activate]);this.root.on("change",function(b){if(!this.isDisabled()){var c=a(b.target).closest(h.PREFERENCE),d=a(b.target).closest(h.PREFERENCE_ROW),e=new f(d,this.userId);c.addClass("loading");e.save().always(function(){c.removeClass("loading")})}}.bind(this));this.root.on(d.events.activate,h.PROCESSOR_SETTING,function(b,c){var d=a(b.target).closest(h.PROCESSOR_SETTING),e=new g(d);e.show();c.originalEvent.preventDefault()});d.define(b,[d.events.activate]);b.on(d.events.activate,function(){this.toggleDisableAllStatus()}.bind(this))};return e});
//# sourceMappingURL=preferences_notifications_list_controller.es6.js.map
