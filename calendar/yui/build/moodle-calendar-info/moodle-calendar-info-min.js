YUI.add("moodle-calendar-info",function(e,t){var n="moodle-calendar-info",r="calendarNode",i=".",s="hasevent",o="eventtitle",u="eventcontent",a="delay",f="boundingBox",l="aria-live",c="innerHTML",h=function(){h.superclass.constructor.apply(this,arguments)};e.extend(h,e.Base,{_events:null,_showTimer:null,_hideTimer:null,_panel:null,initializer:function(){var e=this.get(r);if(e===null)return;e.delegate(["mouseenter","focus"],this.startShow,i+s,this),e.delegate(["mouseleave","blur"],this.startHide,i+s,this)},initPanel:function(){if(!this._panel){var t=this.get(r).ancestor("div");this._panel=new e.Overlay({headerContent:e.Node.create('<h2 class="'+o+'"/>'),bodyContent:e.Node.create('<div class="'+u+'"/>'),visible:!1,render:t,constrain:t,width:t.get("offsetWidth")*.9+"px"}),this._panel.get(f).addClass("calendar-event-panel").setAttribute(l,"off"),this._panel.on("visibleChange",function(e){var t="assertive";e.prevVal&&!e.newVal&&(t="off"),this.get(f).setAttribute(l,t)})}},startShow:function(t){this.cancelHide().cancelShow().initPanel(),this._showTimer=setTimeout(e.bind(function(){this.show(t.currentTarget)},this),this.get(a))},show:function(t){var n=this._panel.get(f),r=e.WidgetPositionAlign;n.one(i+o).set(c,t.getData("title")),n.one(i+u).set(c,t.getData("popupcontent")),t.appendChild(n),this._panel.align(t,[r.TL,r.BC]).show()},cancelShow:function(){return this._showTimer&&clearTimeout(this._showTimer),this},startHide:function(){this.cancelShow().cancelHide()._hideTimer=setTimeout(e.bind(this._panel.hide,this._panel),this.get(a))},cancelHide:function(){return this._hideTimer&&clearTimeout(this._hideTimer),this}},{NAME:"calendarInfo",ATTRS:{calendarNode:{value:null,setter:function(t){return e.one("#"+t)}},delay:{value:300}}}),e.namespace("M.calendar.info").init=function(e){return new h(e)}},"@VERSION@",{requires:["base","node","event-mouseenter","overlay","moodle-calendar-info-skin"]});
