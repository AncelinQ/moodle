define(["jquery","core_calendar/selectors","core_calendar/events","core/str","core/templates"],function(a,b,c,d,e){var f=function(c){c.on("click",b.event_filter_item,function(b){var c=a(b.currentTarget);g(c),b.preventDefault()})},g=function(b){var f={type:b.data("eventtype"),hidden:!b.data("eventtype-hidden")};return d.get_string("eventtype"+f.type,"calendar").then(function(a){return f.name=a,f}).then(function(a){return e.render("core_calendar/event_filter_key",a)}).then(function(a,c){return e.replaceNode(b,a,c)}).then(function(){a("body").trigger(c.filterChanged,{type:f.type,hidden:f.hidden})})};return{init:function(b){b=a(b),f(b)}}});