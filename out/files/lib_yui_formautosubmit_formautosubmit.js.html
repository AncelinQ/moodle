<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lib&#x2F;yui&#x2F;formautosubmit&#x2F;formautosubmit.js - Moodle YUI module API</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="&#x2F;moodle&#x2F;pix&#x2F;moodlelogo.gif" title="Moodle YUI module API"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/core-chooserdialogue.html">core-chooserdialogue</a></li>
            
                <li><a href="..&#x2F;classes/core-dragdrop.html">core-dragdrop</a></li>
            
                <li><a href="..&#x2F;classes/core-formautosubmit.html">core-formautosubmit</a></li>
            
                <li><a href="..&#x2F;classes/core-formchangechecker.html">core-formchangechecker</a></li>
            
                <li><a href="..&#x2F;classes/course-coursebase.html">course-coursebase</a></li>
            
                <li><a href="..&#x2F;classes/course-dndupload.html">course-dndupload</a></li>
            
                <li><a href="..&#x2F;classes/course-resource-toolbox.html">course-resource-toolbox</a></li>
            
                <li><a href="..&#x2F;classes/course-section-toolbox.html">course-section-toolbox</a></li>
            
                <li><a href="..&#x2F;classes/course-toolboxes.html">course-toolboxes</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/core-chooserdialogue.html">core-chooserdialogue</a></li>
            
                <li><a href="..&#x2F;modules/core-dragdrop.html">core-dragdrop</a></li>
            
                <li><a href="..&#x2F;modules/core-formautosubmit.html">core-formautosubmit</a></li>
            
                <li><a href="..&#x2F;modules/core-formchangechecker.html">core-formchangechecker</a></li>
            
                <li><a href="..&#x2F;modules/course-coursebase.html">course-coursebase</a></li>
            
                <li><a href="..&#x2F;modules/course-dndupload.html">course-dndupload</a></li>
            
                <li><a href="..&#x2F;modules/course-toolboxes.html">course-toolboxes</a></li>
            
                <li><a href="..&#x2F;modules/enrol-notification.html">enrol-notification</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: lib&#x2F;yui&#x2F;formautosubmit&#x2F;formautosubmit.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * Form auto submission
 *
 * @module core-formautosubmit
 *&#x2F;
YUI.add(&#x27;moodle-core-formautosubmit&#x27;,
    function(Y) {
        &#x2F;&#x2F; The CSS selectors we use
        var CSS = {
            AUTOSUBMIT : &#x27;autosubmit&#x27;
        };

        var FORMAUTOSUBMITNAME = &#x27;core-formautosubmit&#x27;;

        &#x2F;**
         * Autosubmission of forms
         *
         * @class core-formautosubmit
         * @constructor
         *&#x2F;
        var FORMAUTOSUBMIT = function() {
            FORMAUTOSUBMIT.superclass.constructor.apply(this, arguments);
        };

        &#x2F;&#x2F;  We only want to initialize the module fully once
        var INITIALIZED = false;

        Y.extend(FORMAUTOSUBMIT, Y.Base, {

            &#x2F;**
             * Initialize the module
             *
             * @method initializer
             * @protected
             *&#x2F;
            initializer : function(config) {
                &#x2F;&#x2F; We only apply the delegation once
                if (!INITIALIZED) {
                    INITIALIZED = true;
                    var applyto = Y.one(&#x27;body&#x27;);

                    &#x2F;&#x2F; We don&#x27;t listen for change events by default as using the keyboard triggers these too.
                    applyto.delegate(&#x27;key&#x27;, this.process_changes, &#x27;press:13&#x27;, &#x27;select.&#x27; + CSS.AUTOSUBMIT, this);
                    applyto.delegate(&#x27;click&#x27;, this.process_changes, &#x27;select.&#x27; + CSS.AUTOSUBMIT, this);

                    if (Y.UA.os == &#x27;macintosh&#x27; &amp;&amp; Y.UA.webkit) {
                        &#x2F;&#x2F; Macintosh webkit browsers like change events, but non-macintosh webkit browsers don&#x27;t.
                        applyto.delegate(&#x27;change&#x27;, this.process_changes, &#x27;select.&#x27; + CSS.AUTOSUBMIT, this);
                    }
                    if (Y.UA.ios) {
                        &#x2F;&#x2F; IOS doesn&#x27;t trigger click events because it&#x27;s touch-based.
                        applyto.delegate(&#x27;change&#x27;, this.process_changes, &#x27;select.&#x27; + CSS.AUTOSUBMIT, this);
                    }
                }

                &#x2F;&#x2F; Assign this select items &#x27;nothing&#x27; value and lastindex (current value)
                var thisselect = Y.one(&#x27;select#&#x27; + this.get(&#x27;selectid&#x27;));
                thisselect.setData(&#x27;nothing&#x27;, this.get(&#x27;nothing&#x27;));
                thisselect.setData(&#x27;startindex&#x27;, thisselect.get(&#x27;selectedIndex&#x27;));
            },

            &#x2F;**
             * Check whether the select element was changed
             *
             * @method check_changed
             * @param {EventHandle} e
             *&#x2F;
            check_changed : function(e) {
                var select = e.target.ancestor(&#x27;select.&#x27; + CSS.AUTOSUBMIT, true);
                if (!select) {
                    return false;
                }

                var nothing = select.getData(&#x27;nothing&#x27;);
                var startindex = select.getData(&#x27;startindex&#x27;);
                var currentindex = select.get(&#x27;selectedIndex&#x27;);

                var previousindex = select.getAttribute(&#x27;data-previousindex&#x27;);
                select.setAttribute(&#x27;data-previousindex&#x27;, currentindex);
                if (!previousindex) {
                    previousindex = startindex;
                }

                &#x2F;&#x2F; Check whether the field has changed, and is not the &#x27;nothing&#x27; value
                if ((nothing===false || select.get(&#x27;value&#x27;) != nothing) &amp;&amp; startindex != select.get(&#x27;selectedIndex&#x27;) &amp;&amp; currentindex != previousindex) {
                    return select;
                }
                return false;
            },

            &#x2F;**
             * Process any changes
             * 
             * @method process_changes
             * @param {EventHandle} e
             *&#x2F;
            process_changes : function(e) {
                var select = this.check_changed(e);
                if (select) {
                    var form = select.ancestor(&#x27;form&#x27;, true);
                    form.submit();
                }
            }
        },
        {
            NAME : FORMAUTOSUBMITNAME,
            ATTRS : {
                &#x2F;**
                 * The ID of the item to check.
                 *
                 * @attribute selectid
                 * @type String
                 * @default &#x27;&#x27;
                 * @writeOnce
                 *&#x2F;
                selectid : {
                    &#x27;value&#x27; : &#x27;&#x27;
                },

                &#x2F;**
                 * The &#x27;nothing&#x27; value for the dropdown select.
                 *
                 * The nothing value is used to identify select values which should have no
                 * effect.
                 * 
                 * @attribute nothing
                 * @type any
                 * @default &#x27;&#x27;
                 * @writeOnce
                 *&#x2F;
                nothing : {
                    &#x27;value&#x27; : &#x27;&#x27;
                },

                &#x2F;**
                 * This value needs to be removed
                 * 
                 * @attribute ignorechangeevent
                 * @type boolean
                 * @default false
                 * @deprecated
                 *&#x2F;
                ignorechangeevent : {
                    &#x27;value&#x27; : false
                }
            }
        });

        M.core = M.core || {};
        M.core.init_formautosubmit = M.core.init_formautosubmit || function(config) {
            return new FORMAUTOSUBMIT(config);
        };
    },
    &#x27;@VERSION@&#x27;, {
        requires : [&#x27;base&#x27;, &#x27;event-key&#x27;]
    }
);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
