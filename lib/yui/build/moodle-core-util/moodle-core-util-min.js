function checkall(){var e=document.getElementsByTagName("input");for(var t=0;t<e.length;t++)if(e[t].type=="checkbox"){if(e[t].disabled||e[t].readOnly)continue;e[t].checked=!0}}function checknone(){var e=document.getElementsByTagName("input");for(var t=0;t<e.length;t++)if(e[t].type=="checkbox"){if(e[t].disabled||e[t].readOnly)continue;e[t].checked=!1}}function select_all_in_element_with_id(e,t){var n=document.getElementById(e);if(!n)return;var r=n.getElementsByTagName("input");for(var i=0;i<r.length;++i)if(r[i].type=="checkbox"||r[i].type=="radio")r[i].checked=t}function select_all_in(e,t,n){var r=document.getElementsByTagName("input");r=filterByParent(r,function(r){return findParentNode(r,e,t,n)});for(var i=0;i<r.length;++i)if(r[i].type=="checkbox"||r[i].type=="radio")r[i].checked="checked"}function deselect_all_in(e,t,n){var r=document.getElementsByTagName("INPUT");r=filterByParent(r,function(r){return findParentNode(r,e,t,n)});for(var i=0;i<r.length;++i)if(r[i].type=="checkbox"||r[i].type=="radio")r[i].checked=""}function confirm_if(e,t){return e?confirm(t):!0}function findParentNode(e,t,n,r){while(e.nodeName.toUpperCase()!="BODY"){if(!(!!t&&e.nodeName.toUpperCase()!=t||!!n&&e.className.indexOf(n)==-1||!!r&&e.id!=r))break;e=e.parentNode}return e}function findChildNodes(e,t,n,r,i){var s=[];for(var o=0;o<e.childNodes.length;o++){var u=!1,a=e.childNodes[o];if(a.nodeType==1&&n&&typeof a.className=="string"){var f=a.className.split(/\s+/);for(var l in f)if(f[l]==n){u=!0;break}}a.nodeType==1&&(!!t&&a.nodeName!=t||!!n&&!u||!!r&&a.id!=r||!!i&&a.name!=i?s=s.concat(findChildNodes(a,t,n,r,i)):s=s.concat(a))}return s}function unmaskPassword(e){var t=document.getElementById(e),n=document.getElementById(e+"unmask"),r;if(Y.UA.ie===0||Y.UA.ie>=9)n.checked?t.type="text":t.type="password";else{try{n.checked?r=document.createElement('<input type="text" autocomplete="off" name="'+t.name+'">'):r=document.createElement('<input type="password" autocomplete="off" name="'+t.name+'">'),r.attributes["class"].nodeValue=t.attributes["class"].nodeValue}catch(i){var r=document.createElement("input");r.setAttribute("autocomplete","off"),r.setAttribute("name",t.name),n.checked?r.setAttribute("type","text"):r.setAttribute("type","password"),r.setAttribute("class",t.getAttribute("class"))}r.id=t.id,r.size=t.size,r.onblur=t.onblur,r.onchange=t.onchange,r.value=t.value,t.parentNode.replaceChild(r,t)}}function filterByParent(e,t){var n=[];for(var r=0;r<e.length;++r){var i=t(e[r]);i.nodeName.toUpperCase()!="BODY"&&n.push(e[r])}return n}function fix_column_widths(){var e=navigator.userAgent.toLowerCase();e.indexOf("msie")!=-1&&e.indexOf("opera")==-1&&(fix_column_width("left-column"),fix_column_width("right-column"))}function fix_column_width(e){var t=document.getElementById(e);if(t){if(!t.offsetWidth){setTimeout("fix_column_width('"+e+"')",20);return}var n=0,r=t.childNodes;for(i=0;i<r.length;++i)r[i].className.indexOf("block")!=-1&&n<r[i].offsetWidth&&(n=r[i].offsetWidth);for(i=0;i<r.length;++i)r[i].className.indexOf("block")!=-1&&(r[i].style.width=n+"px")}}function insertAtCursor(e,t){if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=t;else if(e.selectionStart||e.selectionStart=="0"){var n=e.selectionStart,r=e.selectionEnd;e.value=e.value.substring(0,n)+t+e.value.substring(r,e.value.length)}else e.value+=t}function addonload(e){var t=window.onload;window.onload=function(){t&&t(),e()}}function getElementsByClassName(e,t,n){var r=[],i;if(typeof n=="object"){for(i=0;i<n.length;i++)r.push(r[i]);n=r.join("")}if(e.getElementsByClassName&&Array.filter)return t=="*"?e.getElementsByClassName(n):Array.filter(e.getElementsByClassName(n),function(e){return e.nodeName.toLowerCase()==t.toLowerCase()});var s=t=="*"&&e.all?e.all:e.getElementsByTagName(t),o=[],u=[];r=n.split(" ");for(i=0;i<r.length;i++)u.push(new RegExp("(^|\\s)"+r[i].replace(/\-/g,"\\-")+"(\\s|$)"));var a,f;for(var l=0;l<s.length;l++){a=s[l],f=!0;for(var c=0;c<u.length;c++)if(!u[c].test(a.className)){f=!1;break}f&&o.push(a)}return o}function increment_filename(e,t){var n="",r=e;if(!t){var i=e.lastIndexOf(".");i!==-1&&(r=e.substr(0,i),n=e.substr(i,e.length))}var s=0,o=r.match(/^(.*) \((\d+)\)$/);o!==null&&(s=parseInt(o[2],10),r=o[1]),s++;var u=r+" ("+s+")"+n;return u}function right_to_left(){var e=Y.one("body"),t=!1;return e&&e.hasClass("dir-rtl")&&(t=!0),t}function openpopup(e,t){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var n=/[^a-z0-9_]/i;typeof t.name!="string"?t.name="_blank":t.name.match(n)&&(M.cfg.developerdebug&&alert("DEVELOPER NOTICE: Invalid 'name' passed to openpopup(): "+t.name),t.name=t.name.replace(n,"_"));var r=t.url;t.url.match(/https?:\/\//)||(r=M.cfg.wwwroot+t.url),t.fullscreen&&(t.options=t.options.replace(/top=\d+/,"top=0").replace(/left=\d+/,"left=0").replace(/width=\d+/,"width="+screen.availWidth).replace(/height=\d+/,"height="+screen.availHeight));var i=window.open(r,t.name,t.options);if(!i)return!0;if(t.fullscreen){var s=100,o=function(){i.moveTo(0,0),i.resizeTo(screen.availWidth,screen.availHeight),s>0&&(i.innerHeight<10||i.innerWidth<10)&&(s-=1,setTimeout(o,10))};setTimeout(o,0)}return i.focus(),!1}function close_window(e){e.preventDefault?e.preventDefault():e.returnValue=!1,window.close()}function show_item(e){var t=Y.one("#"+e);t&&t.show()}function destroy_item(e){var t=Y.one("#"+e);t&&t.remove(!0)}function focuscontrol(e){var t=document.getElementById(e);t&&t.focus()}function old_onload_focus(e,t){document.forms[e]&&document.forms[e].elements&&document.forms[e].elements[t]&&document.forms[e].elements[t].focus()}function build_querystring(e){return convert_object_to_string(e,"&")}function build_windowoptionsstring(e){return convert_object_to_string(e,",")}function convert_object_to_string(e,t){if(typeof e!="object")return null;var n=[];for(var r in e){r=encodeURIComponent(r);var i=e[r];if(e[r]instanceof Array)for(var s in i)n.push(r+"[]="+encodeURIComponent(i[s]));else n.push(r+"="+encodeURIComponent(i)
)}return n.join(t)}function stripHTML(e){var t=/<\S[^><]*>/g,n=e.replace(t,"");return n}function update_progress_bar(e,t,n,r,i){var s=n,o=document.getElementById("status_"+e),u=document.getElementById("pt_"+e),a=document.getElementById("progress_"+e),f=document.getElementById("time_"+e);o.innerHTML=r,u.innerHTML=s.fixed(2)+"%",s==100?(a.style.background="green",f.style.display="none"):(a.style.background="#FFCC66",i=="?"?f.innerHTML="":(f.innerHTML=i.fixed(2)+" sec",f.style.display="block")),a.style.width=t+"px"}function hide_item(e){var t=Y.one("#"+e);t&&t.hide()}M.util=M.util||{},YUI.add("moodle-core-util",function(e,t){},"@VERSION@",{requires:[]}),M.yui.add_module=function(e){for(var t in e)YUI_config.modules[t]=e[t]},M.yui.galleryversion="2010.04.21-21-51",M.str=M.str||{},M.util.image_url=function(e,t){if(!t||t===""||t==="moodle"||t==="core")t="core";var n=M.cfg.wwwroot+"/theme/image.php";return M.cfg.themerev>0&&M.cfg.slasharguments==1?(M.cfg.svgicons||(n+="/_s"),n+="/"+M.cfg.theme+"/"+t+"/"+M.cfg.themerev+"/"+e):(n+="?theme="+M.cfg.theme+"&component="+t+"&rev="+M.cfg.themerev+"&image="+e,M.cfg.svgicons||(n+="&svg=0")),n},M.util.in_array=function(e,t){var n;for(n=0;n<t.length;n++)if(e==t[n])return!0;return!1},M.util.init_collapsible_region=function(e,t,n,r){e.use("anim",function(e){new M.util.CollapsibleRegion(e,t,n,r)})},M.util.CollapsibleRegion=function(e,t,n,r){this.userpref=n,this.div=e.one("#"+t);var i=this.div.one("#"+t+"_caption"),s=e.Node.create('<a href="#"></a>');s.setAttribute("title",r);while(i.hasChildNodes())child=i.get("firstChild"),child.remove(),s.append(child);i.append(s);var o=this.div.get("offsetHeight"),u="t/collapsed";right_to_left()?u="t/collapsed_rtl":u="t/collapsed",this.div.hasClass("collapsed")?(this.icon=e.Node.create('<img src="'+M.util.image_url(u,"moodle")+'" alt="" />'),this.div.setStyle("height",i.get("offsetHeight")+"px")):this.icon=e.Node.create('<img src="'+M.util.image_url("t/expanded","moodle")+'" alt="" />'),s.append(this.icon);var a=new e.Anim({node:this.div,duration:.3,easing:e.Easing.easeBoth,to:{height:i.get("offsetHeight")},from:{height:o}});a.on("end",function(){this.div.toggleClass("collapsed");var e="t/collapsed";right_to_left()?e="t/collapsed_rtl":e="t/collapsed",this.div.hasClass("collapsed")?this.icon.set("src",M.util.image_url(e,"moodle")):this.icon.set("src",M.util.image_url("t/expanded","moodle"))},this),s.on("click",function(e,t){e.preventDefault(),t.get("running")&&t.stop(),t.set("reverse",this.div.hasClass("collapsed")),this.userpref&&M.util.set_user_preference(this.userpref,!this.div.hasClass("collapsed")),t.run()},this,a)},M.util.CollapsibleRegion.prototype.userpref=null,M.util.CollapsibleRegion.prototype.div=null,M.util.CollapsibleRegion.prototype.icon=null,M.util.set_user_preference=function(e,t){YUI().use("io",function(n){var r=M.cfg.wwwroot+"/lib/ajax/setuserpref.php?sesskey="+M.cfg.sesskey+"&pref="+encodeURI(e)+"&value="+encodeURI(t),i={method:"get",on:{}};M.cfg.developerdebug&&(i.on.failure=function(){alert("Error updating user preference '"+e+"' using ajax. Clicking this link will repeat the Ajax call that failed so you can see the error: ")}),n.io(r,i)})},M.util.show_confirm_dialog=function(e,args){var target=e.target;e.preventDefault&&e.preventDefault(),YUI().use("yui2-container","yui2-event",function(Y){var simpledialog=new Y.YUI2.widget.SimpleDialog("confirmdialog",{width:"300px",fixedcenter:!0,modal:!0,visible:!1,draggable:!1});simpledialog.setHeader(M.str.admin.confirmation),simpledialog.setBody(args.message),simpledialog.cfg.setProperty("icon",Y.YUI2.widget.SimpleDialog.ICON_WARN);var handle_cancel=function(){simpledialog.hide()},handle_yes=function(){simpledialog.hide();if(args.callback){var callback=null;Y.Lang.isFunction(args.callback)?callback=args.callback:callback=eval("("+args.callback+")");var sc;Y.Lang.isObject(args.scope)?sc=args.scope:sc=e.target,args.callbackargs?callback.apply(sc,args.callbackargs):callback.apply(sc);return}var targetancestor=null,targetform=null;if(target.test("a"))window.location=target.get("href");else if((targetancestor=target.ancestor("a"))!==null)window.location=targetancestor.get("href");else if(target.test("input")){targetform=target.ancestor(function(e){return e.get("tagName").toLowerCase()=="form"});if(!targetform)return;target.get("name")&&target.get("value")&&targetform.append('<input type="hidden" name="'+target.get("name")+'" value="'+target.get("value")+'">'),targetform.submit()}else target.get("tagName").toLowerCase()=="form"?target.submit():M.cfg.developerdebug&&alert("Element of type "+target.get("tagName")+" is not supported by the M.util.show_confirm_dialog function. Use A, INPUT, or FORM")};args.cancellabel||(args.cancellabel=M.str.moodle.cancel),args.continuelabel||(args.continuelabel=M.str.moodle.yes);var buttons=[{text:args.cancellabel,handler:handle_cancel,isDefault:!0},{text:args.continuelabel,handler:handle_yes}];simpledialog.cfg.queueProperty("buttons",buttons),simpledialog.render(document.body),simpledialog.show()})},M.util.init_frametop=function(e){e.all("a").each(function(e){e.set("target","_top")}),e.all("form").each(function(e){e.set("target","_top")})},M.util.init_toggle_class_on_click=function(e,t,n,r,i){i==""&&(i=n);var s=e.one("#"+t);s.all(n).each(function(e){e.on("click",function(e){e.stopPropagation(),e.target.test(n)&&!e.target.test("a")&&!e.target.test("img")&&(this.test(i)?this.toggleClass(r):this.ancestor(i).toggleClass(r))},e)}),s.on("click",function(e){e.target.hasClass("addtoall")?this.all(i).addClass(r):e.target.hasClass("removefromall")&&this.all(i+"."+r).removeClass(r)},s)},M.util.init_maximised_embed=function(e,t){var n=e.one("#"+t);if(!n)return;var r=function(t,n){e.Lang.isString(t)&&(t=e.one("#"+t));if(t){var r=t.getStyle(n);return r==="auto"&&(r=t.getComputedStyle(n)),parseInt(r,10)}return 0},i=function(){n.setStyle("width","0px"),n.setStyle("height","0px");var t=r("maincontent","width")-35;t>500?n.setStyle("width",t+"px"):n.setStyle
("width","500px");var i=r("page-header","height"),s=r("page-footer","height"),o=parseInt(e.one("body").get("winHeight"),10)-s-i-100;o<400&&(o=400),n.setStyle("height",o+"px")};i(),window.onresize=function(){i()}},M.util.init_block_hider=function(e,t){e.use("base","node",function(e){M.util.block_hider=M.util.block_hider||function(){var t=function(){t.superclass.constructor.apply(this,arguments)};return t.prototype={initializer:function(t){this.set("block","#"+this.get("id"));var n=this.get("block"),r=n.one(".title"),i=null;if(r&&(i=r.one(".block_action"))){var s=e.Node.create('<img class="block-hider-hide" tabindex="0" alt="'+t.tooltipVisible+'" title="'+t.tooltipVisible+'" />');s.setAttribute("src",this.get("iconVisible")).on("click",this.updateState,this,!0),s.on("keypress",this.updateStateKey,this,!0);var o=e.Node.create('<img class="block-hider-show" tabindex="0" alt="'+t.tooltipHidden+'" title="'+t.tooltipHidden+'" />');o.setAttribute("src",this.get("iconHidden")).on("click",this.updateState,this,!1),o.on("keypress",this.updateStateKey,this,!1),i.insert(o,0).insert(s,0)}},updateState:function(e,t){M.util.set_user_preference(this.get("preference"),t),t?this.get("block").addClass("hidden"):this.get("block").removeClass("hidden")},updateStateKey:function(e,t){e.keyCode===13&&this.updateState(this,t)}},e.extend(t,e.Base,t.prototype,{NAME:"blockhider",ATTRS:{id:{},preference:{},iconVisible:{value:M.util.image_url("t/switch_minus","moodle")},iconHidden:{value:M.util.image_url("t/switch_plus","moodle")},block:{setter:function(t){return e.one(t)}}}}),t}(),new M.util.block_hider(t)})},M.util.pending_js=[],M.util.complete_js=[],M.util.js_pending=function(e){return e!==!1&&M.util.pending_js.push(e),M.util.pending_js.length},M.util.js_watch_io=function(){YUI.add("moodle-core-io",function(e){e.on("io:start",function(e){M.util.js_pending("io:"+e)}),e.on("io:end",function(e){M.util.js_complete("io:"+e)})}),YUI.applyConfig({modules:{"moodle-core-io":{after:["io-base"]},"io-base":{requires:["moodle-core-io"]}}})},M.util.js_pending("init"),M.util.js_watch_io(),M.util.js_complete=function(e){var t=M.util.pending_js.indexOf(e);return t>=0&&M.util.complete_js.push(M.util.pending_js.splice(t,1)),M.util.pending_js.length},M.util.get_string=function(e,t,n){var r,i;M.cfg.developerdebug&&(typeof M.util.get_string_yui_instance=="undefined"&&(M.util.get_string_yui_instance=new YUI({debug:!0})),i=M.util.get_string_yui_instance);if(!M.str.hasOwnProperty(t)||!M.str[t].hasOwnProperty(e))return r="[["+e+","+t+"]]",M.cfg.developerdebug,r;r=M.str[t][e];if(typeof n=="undefined")return r;if(typeof n=="number"||typeof n=="string")return r=r.replace(/\{\$a\}/g,n),r;if(typeof n=="object"){for(var s in n){if(typeof n[s]!="number"&&typeof n[s]!="string"){M.cfg.developerdebug;continue}var o="{$a->"+s+"}";o=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=new RegExp(o,"g"),r=r.replace(o,n[s])}return r}return M.cfg.developerdebug,r},M.util.focus_login_form=function(e){var t=e.one("#username"),n=e.one("#password");if(t===null||n===null)return;var r=document.activeElement;if(r!="undefined"&&r.tagName=="INPUT")return;t.get("value")===""?t.focus():n.focus()},M.util.focus_login_error=function(e){var t=e.one("#loginerrormessage");t&&t.focus()},M.util.add_lightbox=function(e,t){var n={pix:"i/loading_small",component:"moodle"};if(t.one(".lightbox"))return t.one(".lightbox");t.setStyle("position","relative");var r=e.Node.create("<img />").setAttrs({src:M.util.image_url(n.pix,n.component)}).setStyles({position:"relative",top:"50%"}),i=e.Node.create("<div></div>").setStyles({opacity:".75",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"white",textAlign:"center"}).setAttribute("class","lightbox").hide();return i.appendChild(r),t.append(i),i},M.util.add_spinner=function(e,t){var n={pix:"i/loading_small",component:"moodle"};if(t.one(".spinner"))return t.one(".spinner");var r=e.Node.create("<img />").setAttribute("src",M.util.image_url(n.pix,n.component)).addClass("spinner").addClass("iconsmall").hide();return t.append(r),r},Number.prototype.fixed=function(n){with(Math)return round(Number(this)*pow(10,n))/pow(10,n)},M.util.help_popups={setup:function(e){e.one("body").delegate("click",this.open_popup,"a.helplinkpopup",this)},open_popup:function(e){e.preventDefault();var t=e.target.ancestor("a",!0),n={name:"popup",url:t.getAttribute("href"),options:""},r=["height=600","width=800","top=0","left=0","menubar=0","location=0","scrollbars","resizable","toolbar","status","directories=0","fullscreen=0","dependent"];n.options=r.join(","),openpopup(e,n)}},M.core_custom_menu={init:function(e,t){var n=e.one("#"+t);n&&e.use("node-menunav",function(e){n.removeClass("javascript-disabled"),n.plug(e.Plugin.NodeMenuNav)})}},M.form=M.form||{},M.form.init_smartselect=function(e,t,n){t.match(/^id_/)||(t="id_"+t);var r=e.one("select#"+t);if(!r)return!1;e.use("event-delegate",function(){var i={id:t,structure:[],options:[],submenucount:0,currentvalue:null,currenttext:null,shownevent:null,cfg:{selectablecategories:!0,mode:null},nodes:{select:null,loading:null,menu:null},init:function(e,t,n,r){var i;if(typeof n=="object")for(i in this.cfg)if(n[i]||n[i]===!1)this.cfg[i]=n[i];this.nodes.select=r.select,this.currentvalue=this.nodes.select.get("selectedIndex"),this.currenttext=this.nodes.select.all("option").item(this.currentvalue).get("innerHTML");var s=[];s[""]={text:this.currenttext,value:"",depth:0,children:[]},this.nodes.select.all("option").each(function(e,t){var n=e.get("innerHTML"),r=n.replace(/^(&nbsp;)*/,""),i;n===r?(r=n.replace(/^(\s)*/,""),i=n.length-r.length+1):i=(n.length-r.length)/12+1,e.set("innerHTML",r),s["i"+t]={text:r,depth:i,index:t,children:[]}},this),this.structure=[];var o=0;for(i in s){var u=s[i];if(u.depth===0)this.structure.push(u),o++;else{var a=u.depth,f=this.structure[o-1];for(var l=0;l<u.depth-1;l++)f&&f.children&&(f=f.children[f.children.length-1]);f&&f.children&&f.children.push(u)}}this.nodes.menu=e.Node.create(this
.generate_menu_content()),this.nodes.menu.one(".smartselect_mask").setStyle("opacity",.01),this.nodes.menu.one(".smartselect_mask").setStyle("width",this.nodes.select.get("offsetWidth")+5+"px"),this.nodes.menu.one(".smartselect_mask").setStyle("height",this.nodes.select.get("offsetHeight")+"px");if(this.cfg.mode===null){var c=this.nodes.select.ancestor("form").get("offsetWidth");c<400||this.nodes.menu.get("offsetWidth")<c*2?this.cfg.mode="compact":this.cfg.mode="spanning"}this.cfg.mode=="compact"?this.nodes.menu.addClass("compactmenu"):(this.nodes.menu.addClass("spanningmenu"),this.nodes.menu.delegate("mouseover",this.show_sub_menu,".smartselect_submenuitem",this)),e.one(document.body).append(this.nodes.menu);var h=this.nodes.select.getXY();h[0]+=1,this.nodes.menu.setXY(h),this.nodes.menu.on("click",this.handle_click,this),e.one(window).on("resize",function(){var e=this.nodes.select.getXY();e[0]+=1,this.nodes.menu.setXY(e)},this)},generate_menu_content:function(){var e='<div id="'+this.id+'_smart_select" class="smartselect">';return e+=this.generate_submenu_content(this.structure[0],!0),e+="</ul></div>",e},generate_submenu_content:function(e,t){this.submenucount++;var n="";if(e.children.length>0){if(t)n+='<div class="smartselect_mask" href="#ss_submenu'+this.submenucount+'">&nbsp;</div>',n+='<div id="ss_submenu'+this.submenucount+'" class="smartselect_menu">',n+='<div class="smartselect_menu_content">';else{n+='<li class="smartselect_submenuitem">';var r=this.cfg.selectablecategories?"selectable":"notselectable";n+='<a class="smartselect_menuitem_label '+r+'" href="#ss_submenu'+this.submenucount+'" value="'+e.index+'">'+e.text+"</a>",n+='<div id="ss_submenu'+this.submenucount+'" class="smartselect_submenu">',n+='<div class="smartselect_submenu_content">'}n+="<ul>";for(var i in e.children)n+=this.generate_submenu_content(e.children[i],!1);n+="</ul>",n+="</div>",n+="</div>",t?n+="":n+="</li>"}else n+='<li class="smartselect_menuitem">',n+='<a class="smartselect_menuitem_content selectable" href="#" value="'+e.index+'">'+e.text+"</a>",n+="</li>";return n},select:function(e){var t=e.target;e.halt(),this.currenttext=t.get("innerHTML"),this.currentvalue=t.getAttribute("value"),this.nodes.select.set("selectedIndex",this.currentvalue),this.hide_menu()},handle_click:function(e){var t=e.target;t.hasClass("smartselect_mask")?this.show_menu(e):t.hasClass("selectable")||t.hasClass("smartselect_menuitem")?this.select(e):(t.hasClass("smartselect_menuitem_label")||t.hasClass("smartselect_submenuitem"))&&this.show_sub_menu(e)},show_menu:function(t){t.halt();var n=t.target.ancestor().one(".smartselect_menu");n.addClass("visible"),this.shownevent=e.one(document.body).on("click",this.hide_menu,this)},show_sub_menu:function(e){e.halt();var t=e.target;t.hasClass("smartselect_submenuitem")||(t=t.ancestor(".smartselect_submenuitem"));if(this.cfg.mode=="compact"&&t.one(".smartselect_submenu").hasClass("visible")){t.ancestor("ul").all(".smartselect_submenu.visible").removeClass("visible");return}t.ancestor("ul").all(".smartselect_submenu.visible").removeClass("visible"),t.one(".smartselect_submenu").addClass("visible")},hide_menu:function(){this.nodes.menu.all(".visible").removeClass("visible"),this.shownevent&&this.shownevent.detach()}};i.init(e,t,n,{select:r})})},M.util.video_players=[],M.util.audio_players=[],M.util.add_video_player=function(e,t,n,r,i){M.util.video_players.push({id:e,fileurl:t,width:n,height:r,autosize:i,resized:!1})},M.util.add_audio_player=function(e,t,n){M.util.audio_players.push({id:e,fileurl:t,small:n})},M.util.load_flowplayer=function(){if(M.util.video_players.length===0&&M.util.audio_players.length===0)return;if(typeof flowplayer=="undefined"){var e=!1,t=function(){var t,n,r;if(e||typeof flowplayer=="undefined")return;e=!0;var i={autoHide:!0};for(n=0;n<M.util.video_players.length;n++)r=M.util.video_players[n],r.width>0&&r.height>0?t={src:M.cfg.wwwroot+"/lib/flowplayer/flowplayer-3.2.16.swf",width:r.width,height:r.height}:t=M.cfg.wwwroot+"/lib/flowplayer/flowplayer-3.2.16.swf",flowplayer(r.id,t,{plugins:{controls:i},clip:{url:r.fileurl,autoPlay:!1,autoBuffering:!0,scaling:"fit",mvideo:r,onMetaData:function(e){var t,n;if(e.mvideo.autosize&&!e.mvideo.resized){e.mvideo.resized=!0,typeof e.metaData.width=="undefined"||typeof e.metaData.height=="undefined"?(t=e.width,n=e.height):(t=e.metaData.width,n=e.metaData.height);var r=300;t<r&&(n=n*r/t,t=r);var i=this._api();i.width=t,i.height=n}}}});if(M.util.audio_players.length===0)return;i={autoHide:!1,fullscreen:!1,next:!1,previous:!1,scrubber:!0,play:!0,pause:!0,volume:!0,mute:!1,backgroundGradient:[.5,0,.3]};var s;for(var o=0;o<document.styleSheets.length;o++){var u=!1;try{if(typeof document.styleSheets[o].rules!="undefined")u=document.styleSheets[o].rules;else{if(typeof document.styleSheets[o].cssRules=="undefined")continue;u=document.styleSheets[o].cssRules}}catch(a){continue}if(!u)continue;for(n=0;n<u.length;n++){s="";if(/^\.mp3flowplayer_.*Color$/.test(u[n].selectorText)){typeof u[n].cssText!="undefined"?s=u[n].cssText:typeof u[n].style.cssText!="undefined"&&(s=u[n].style.cssText);if(s!==""&&/.*color\s*:\s*([^;]+).*/gi.test(s)){s=s.replace(/.*color\s*:\s*([^;]+).*/gi,"$1");var f=u[n].selectorText.replace(/^\.mp3flowplayer_/,"");i[f]=s}}}u=!1}for(n=0;n<M.util.audio_players.length;n++){var l=M.util.audio_players[n];l.small?(i.controlall=!1,i.height=15,i.time=!1):(i.controlall=!0,i.height=25,i.time=!0),flowplayer(l.id,M.cfg.wwwroot+"/lib/flowplayer/flowplayer-3.2.16.swf",{plugins:{controls:i,audio:{url:M.cfg.wwwroot+"/lib/flowplayer/flowplayer.audio-3.2.10.swf"}},clip:{url:l.fileurl,provider:"audio",autoPlay:!1}})}},n;M.cfg.jsrev==-1?n=M.cfg.wwwroot+"/lib/flowplayer/flowplayer-3.2.12.js":n=M.cfg.wwwroot+"/lib/javascript.php?jsfile=/lib/flowplayer/flowplayer-3.2.12.min.js&rev="+M.cfg.jsrev;var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",n),r.onload=t,r.onreadystatechange=t,document.getElementsByTagName
("head")[0].appendChild(r)}};
