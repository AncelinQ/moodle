YUI.add("moodle-core-lockscroll",function(e,t){e.namespace("Moodle.core").LockScroll=e.Base.create("lockScroll",e.Plugin.Base,[],{_events:null,_scrollNode:null,_pageScrollNode:null,_lockDepth:0,_scrollTop:0,_scrollLeft:0,_enabled:!1,_scrollLocked:!1,initializer:function(){this._scrollNode=this._getScrollNode(),this._pageScrollNode=e.one(e.config.doc.body)},destructor:function(){this.disableScrollLock()},enableScrollLock:function(){if(this.isActive())return this;this._scrollTop=this._scrollNode.scrollTop,this._scrollLeft=this._scrollNode.scrollLeft,this._events=[e.one(e.config.doc).on("scroll",this.forceScrollPosition,this)];var t=this._pageScrollNode.getAttribute("data-lockscrollcount")||0;return this._lockDepth=parseInt(t,10)+1,this._pageScrollNode.setAttribute("data-lockscrollcount",this._lockDepth),this._pageScrollNode.get("docHeight")>=this._pageScrollNode.get("winHeight")&&this._pageScrollNode.setStyles({overflowY:"scroll",width:"100%"}),this._pageScrollNode.get("docWidth")>=this._pageScrollNode.get("winWidth")&&this._pageScrollNode.setStyles({overflowX:"scroll"}),this._lockBodyScroll(),this._enabled=!0,this},isActive:function(){return this._enabled},forceScrollPosition:function(){return this._scrollNode.scrollTop=this._scrollTop,this._scrollNode.scrollLeft=this._scrollLeft,this},disableScrollLock:function(){return this.isActive()&&((new e.EventHandle(this._events)).detach(),this._events=null,this._unlockBodyScroll()),this._enabled=!1,this},_lockBodyScroll:function(){var e=parseInt(this._pageScrollNode.getAttribute("data-lockscrolldepth"),10);if(!e||e===this._lockDepth)this._pageScrollNode.setAttribute("data-lockscrolldepth",this._lockDepth).setStyles({top:0-this._scrollTop+"px",left:0-this._scrollLeft+"px",position:"fixed"}),this._scrollLocked=!0;return this},_unlockBodyScroll:function(){var e=parseInt(this._pageScrollNode.getAttribute("data-lockscrollcount"),10);return this._pageScrollNode.setAttribute("data-lockscrollcount",e-1),this._scrollLocked&&(this._pageScrollNode.setAttribute("data-lockscrolldepth",0).setStyles({top:null,left:null,position:null,overflowX:null,overflowY:null,width:null}),this._scrollNode.scrollTop=this._scrollTop,this._scrollNode.scrollLeft=this._scrollLeft,this._scrollLocked=!1),this},_getScrollNode:function(){var t="body";return e.UA.ie&&e.config.doc.compatMode!=="BackCompat"&&(t="documentElement"),e.config.doc[t]}},{NS:"lockScroll",ATTRS:{}})},"@VERSION@",{requires:["plugin","base-build"]});
