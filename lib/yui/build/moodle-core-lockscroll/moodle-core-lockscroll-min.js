YUI.add("moodle-core-lockscroll",function(e,t){var n={PAGENODE:"#page"};e.namespace("Moodle.core").LockScroll=e.Base.create("lockScroll",e.Plugin.Base,[],{_events:null,_pageNode:null,_scrollNode:null,_scrollTop:0,_scrollLeft:0,initializer:function(){this._scrollNode=this._getScrollNode(),this._pageNode=e.one(n.PAGENODE)},destructor:function(){this.disableScrollLock()},enableScrollLock:function(){if(this._events&&this._events.length>1)return;return this._scrollTop=this._scrollNode.get("scrollTop"),this._scrollLeft=this._scrollNode.get("scrollLeft"),this._events=[e.one(e.config.doc).on("scroll",this.forceScrollPosition,this)],this.forceScrollPosition(),this._pageNode&&this._pageNode.setStyles({top:this._pageNode.get("offsetTop")-this._scrollTop,left:this._pageNode.get("offsetLeft")-this._scrollLeft,position:"fixed !important"}),this},isActive:function(){return this._events&&this._events.length>0},forceScrollPosition:function(){return this._scrollNode.set("scrollTop",this._scrollTop).set("scrollLeft",this._scrollLeft),this},disableScrollLock:function(){return this.isActive()&&((new e.EventHandle(this._events)).detach(),this._events=null,this._scrollNode.set("scrollTop",this._scrollTop),this._scrollNode.set("scrollLeft",this._scrollLeft),this._pageNode&&this._pageNode.setStyles({position:null,top:null,left:null})),this},_getScrollNode:function(){var t;return e.UA.ie&&(e.config.doc.compatMode!=="BackCompat"?t="documentElement":t="body"),t?e.one(e.config.doc[t]):e.one(e.config.doc)}},{NS:"lockScroll",ATTRS:{}})},"@VERSION@",{requires:["plugin","base-build"]});
