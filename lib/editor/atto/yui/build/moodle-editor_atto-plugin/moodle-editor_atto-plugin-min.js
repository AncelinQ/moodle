YUI.add("moodle-editor_atto-plugin",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}var r=".atto_group.",i="_group";e.extend(n,e.Base,{buttons:[],_buttonHandlers:[],editor:null,toolbar:null,name:null,initializer:function(e){this.editor=e.editor,this.toolbar=e.toolbar,this.name=e.name},addButton:function(t){var n=this.get("group"),r=this.name,i="atto_"+r+"_button";t.icon||(t.icon="e/"+t.exec),t.iconComponent||(t.iconComponent="core");var s=M.util.image_url(t.icon,t.iconComponent),o=e.Node.create('<button class="'+i+'"'+'tabindex="-1" '+'title="'+e.Escape.html(M.util.get_string("pluginname","atto_"+r))+'">'+'<img class="icon" aria-hidden="true" role="presentation" width="16" height="16" src="'+s+'"/>'+"</button>");n.append(o);var u=this.toolbar.getAttribute("aria-activedescendant");return u||(o.setAttribute("tabindex","0"),this.toolbar.setAttribute("aria-activedescendant",o.generateID())),this._buttonHandlers.push(this.toolbar.delegate("click",t.callback,"."+i,this)),this.buttons.push(o),o},addBasicButton:function(e){return e.exec?(e.callback=function(t){t.preventDefault(),this.isActive()&&this.focus(),document.execCommand(e.exec,!1,null),this.markUpdated()},this.addButton(e)):null},isEnabled:function(){var t=e.Array.find(this.buttons,function(){return this.hasAttribute("disabled")&&this.getAttribute("disabled")==="true"});return t?!0:!1},disableButtons:function(){return e.Array.each(this.buttons,function(){this.setAttribute("disabled",!0)}),this},enableButtons:function(){return e.Array.each(this.buttons,function(){this.removeAttribute("disabled")}),this},isActive:function(){return this.get("host").isActive()},focus:function(){return this.get("host").focus()},markUpdated:function(){return this.get("host").updateOriginal()}},{NAME:"editorPlugin",ATTRS:{host:{writeOnce:!0},group:{writeOnce:!0,getter:function(t){var n=this.toolbar,s=n.one(r+t+i);return s||(s=e.Node.create('<div class="atto_group '+t+i+'"></div>'),n.append(s)),s}}}}),e.namespace("M.editor_atto").EditorPlugin=n},"@VERSION@",{requires:["node","base","escape","event"]});
