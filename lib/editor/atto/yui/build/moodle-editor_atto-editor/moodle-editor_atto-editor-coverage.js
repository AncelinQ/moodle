if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['lib/editor/atto/yui/build/moodle-editor_atto-editor/moodle-editor_atto-editor.js']) {
   __coverage__['lib/editor/atto/yui/build/moodle-editor_atto-editor/moodle-editor_atto-editor.js'] = {"path":"lib/editor/atto/yui/build/moodle-editor_atto-editor/moodle-editor_atto-editor.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":37},"end":{"line":1,"column":56}}},"2":{"name":"(anonymous_2)","line":56,"loc":{"start":{"line":56,"column":28},"end":{"line":56,"column":40}}},"3":{"name":"(anonymous_3)","line":74,"loc":{"start":{"line":74,"column":28},"end":{"line":74,"column":40}}},"4":{"name":"(anonymous_4)","line":96,"loc":{"start":{"line":96,"column":17},"end":{"line":96,"column":45}}},"5":{"name":"(anonymous_5)","line":105,"loc":{"start":{"line":105,"column":26},"end":{"line":105,"column":46}}},"6":{"name":"(anonymous_6)","line":121,"loc":{"start":{"line":121,"column":20},"end":{"line":121,"column":48}}},"7":{"name":"(anonymous_7)","line":133,"loc":{"start":{"line":133,"column":25},"end":{"line":133,"column":45}}},"8":{"name":"(anonymous_8)","line":151,"loc":{"start":{"line":151,"column":23},"end":{"line":151,"column":66}}},"9":{"name":"(anonymous_9)","line":215,"loc":{"start":{"line":215,"column":25},"end":{"line":215,"column":68}}},"10":{"name":"(anonymous_10)","line":242,"loc":{"start":{"line":242,"column":16},"end":{"line":242,"column":36}}},"11":{"name":"(anonymous_11)","line":263,"loc":{"start":{"line":263,"column":12},"end":{"line":263,"column":32}}},"12":{"name":"(anonymous_12)","line":271,"loc":{"start":{"line":271,"column":11},"end":{"line":271,"column":28}}},"13":{"name":"(anonymous_13)","line":303,"loc":{"start":{"line":303,"column":24},"end":{"line":303,"column":35}}},"14":{"name":"(anonymous_14)","line":317,"loc":{"start":{"line":317,"column":22},"end":{"line":317,"column":58}}},"15":{"name":"(anonymous_15)","line":318,"loc":{"start":{"line":318,"column":33},"end":{"line":318,"column":46}}},"16":{"name":"(anonymous_16)","line":333,"loc":{"start":{"line":333,"column":29},"end":{"line":333,"column":44}}},"17":{"name":"(anonymous_17)","line":354,"loc":{"start":{"line":354,"column":20},"end":{"line":354,"column":31}}},"18":{"name":"(anonymous_18)","line":375,"loc":{"start":{"line":375,"column":32},"end":{"line":375,"column":43}}},"19":{"name":"(anonymous_19)","line":386,"loc":{"start":{"line":386,"column":25},"end":{"line":386,"column":36}}},"20":{"name":"(anonymous_20)","line":396,"loc":{"start":{"line":396,"column":20},"end":{"line":396,"column":40}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":416,"column":95}},"2":{"start":{"line":26,"column":0},"end":{"line":413,"column":2}},"3":{"start":{"line":57,"column":8},"end":{"line":57,"column":27}},"4":{"start":{"line":58,"column":8},"end":{"line":58,"column":53}},"5":{"start":{"line":59,"column":8},"end":{"line":59,"column":55}},"6":{"start":{"line":60,"column":8},"end":{"line":60,"column":53}},"7":{"start":{"line":62,"column":8},"end":{"line":66,"column":9}},"8":{"start":{"line":63,"column":12},"end":{"line":63,"column":27}},"9":{"start":{"line":65,"column":12},"end":{"line":65,"column":27}},"10":{"start":{"line":75,"column":8},"end":{"line":75,"column":57}},"11":{"start":{"line":76,"column":8},"end":{"line":76,"column":54}},"12":{"start":{"line":77,"column":8},"end":{"line":77,"column":56}},"13":{"start":{"line":78,"column":8},"end":{"line":78,"column":68}},"14":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"15":{"start":{"line":81,"column":12},"end":{"line":81,"column":27}},"16":{"start":{"line":84,"column":8},"end":{"line":88,"column":9}},"17":{"start":{"line":86,"column":12},"end":{"line":86,"column":60}},"18":{"start":{"line":87,"column":12},"end":{"line":87,"column":41}},"19":{"start":{"line":97,"column":8},"end":{"line":97,"column":86}},"20":{"start":{"line":99,"column":8},"end":{"line":99,"column":49}},"21":{"start":{"line":106,"column":8},"end":{"line":106,"column":28}},"22":{"start":{"line":107,"column":8},"end":{"line":113,"column":9}},"23":{"start":{"line":108,"column":12},"end":{"line":108,"column":86}},"24":{"start":{"line":110,"column":12},"end":{"line":112,"column":13}},"25":{"start":{"line":111,"column":16},"end":{"line":111,"column":57}},"26":{"start":{"line":122,"column":8},"end":{"line":122,"column":86}},"27":{"start":{"line":124,"column":8},"end":{"line":126,"column":9}},"28":{"start":{"line":125,"column":12},"end":{"line":125,"column":48}},"29":{"start":{"line":134,"column":8},"end":{"line":134,"column":28}},"30":{"start":{"line":135,"column":8},"end":{"line":141,"column":9}},"31":{"start":{"line":136,"column":12},"end":{"line":136,"column":86}},"32":{"start":{"line":138,"column":12},"end":{"line":140,"column":13}},"33":{"start":{"line":139,"column":16},"end":{"line":139,"column":52}},"34":{"start":{"line":152,"column":8},"end":{"line":152,"column":58}},"35":{"start":{"line":153,"column":8},"end":{"line":157,"column":49}},"36":{"start":{"line":159,"column":8},"end":{"line":159,"column":31}},"37":{"start":{"line":162,"column":8},"end":{"line":162,"column":47}},"38":{"start":{"line":164,"column":8},"end":{"line":165,"column":102}},"39":{"start":{"line":167,"column":8},"end":{"line":167,"column":30}},"40":{"start":{"line":169,"column":8},"end":{"line":184,"column":9}},"41":{"start":{"line":170,"column":12},"end":{"line":170,"column":31}},"42":{"start":{"line":172,"column":12},"end":{"line":179,"column":50}},"43":{"start":{"line":180,"column":12},"end":{"line":183,"column":13}},"44":{"start":{"line":181,"column":16},"end":{"line":181,"column":121}},"45":{"start":{"line":182,"column":16},"end":{"line":182,"column":86}},"46":{"start":{"line":186,"column":8},"end":{"line":189,"column":9}},"47":{"start":{"line":187,"column":12},"end":{"line":187,"column":112}},"48":{"start":{"line":188,"column":12},"end":{"line":188,"column":56}},"49":{"start":{"line":191,"column":8},"end":{"line":200,"column":11}},"50":{"start":{"line":202,"column":8},"end":{"line":202,"column":64}},"51":{"start":{"line":203,"column":8},"end":{"line":203,"column":25}},"52":{"start":{"line":204,"column":8},"end":{"line":204,"column":23}},"53":{"start":{"line":205,"column":8},"end":{"line":205,"column":34}},"54":{"start":{"line":216,"column":8},"end":{"line":216,"column":58}},"55":{"start":{"line":217,"column":8},"end":{"line":222,"column":49}},"56":{"start":{"line":224,"column":8},"end":{"line":224,"column":31}},"57":{"start":{"line":227,"column":8},"end":{"line":230,"column":9}},"58":{"start":{"line":228,"column":12},"end":{"line":228,"column":112}},"59":{"start":{"line":229,"column":12},"end":{"line":229,"column":59}},"60":{"start":{"line":233,"column":8},"end":{"line":233,"column":47}},"61":{"start":{"line":243,"column":8},"end":{"line":243,"column":54}},"62":{"start":{"line":245,"column":8},"end":{"line":247,"column":9}},"63":{"start":{"line":246,"column":12},"end":{"line":246,"column":40}},"64":{"start":{"line":249,"column":8},"end":{"line":249,"column":24}},"65":{"start":{"line":250,"column":8},"end":{"line":254,"column":9}},"66":{"start":{"line":251,"column":12},"end":{"line":251,"column":52}},"67":{"start":{"line":253,"column":12},"end":{"line":253,"column":51}},"68":{"start":{"line":256,"column":8},"end":{"line":256,"column":76}},"69":{"start":{"line":264,"column":8},"end":{"line":264,"column":52}},"70":{"start":{"line":272,"column":8},"end":{"line":272,"column":52}},"71":{"start":{"line":273,"column":8},"end":{"line":276,"column":69}},"72":{"start":{"line":277,"column":8},"end":{"line":277,"column":25}},"73":{"start":{"line":278,"column":8},"end":{"line":278,"column":112}},"74":{"start":{"line":281,"column":8},"end":{"line":281,"column":59}},"75":{"start":{"line":282,"column":8},"end":{"line":282,"column":52}},"76":{"start":{"line":283,"column":8},"end":{"line":286,"column":9}},"77":{"start":{"line":284,"column":12},"end":{"line":284,"column":100}},"78":{"start":{"line":285,"column":12},"end":{"line":285,"column":43}},"79":{"start":{"line":287,"column":8},"end":{"line":287,"column":87}},"80":{"start":{"line":290,"column":8},"end":{"line":290,"column":43}},"81":{"start":{"line":293,"column":8},"end":{"line":293,"column":61}},"82":{"start":{"line":295,"column":8},"end":{"line":295,"column":58}},"83":{"start":{"line":296,"column":8},"end":{"line":296,"column":59}},"84":{"start":{"line":297,"column":8},"end":{"line":297,"column":69}},"85":{"start":{"line":298,"column":8},"end":{"line":298,"column":65}},"86":{"start":{"line":300,"column":8},"end":{"line":300,"column":24}},"87":{"start":{"line":303,"column":8},"end":{"line":305,"column":11}},"88":{"start":{"line":304,"column":12},"end":{"line":304,"column":50}},"89":{"start":{"line":308,"column":8},"end":{"line":308,"column":85}},"90":{"start":{"line":318,"column":8},"end":{"line":325,"column":11}},"91":{"start":{"line":319,"column":12},"end":{"line":319,"column":75}},"92":{"start":{"line":321,"column":12},"end":{"line":321,"column":44}},"93":{"start":{"line":322,"column":12},"end":{"line":322,"column":53}},"94":{"start":{"line":324,"column":12},"end":{"line":324,"column":47}},"95":{"start":{"line":334,"column":8},"end":{"line":334,"column":18}},"96":{"start":{"line":336,"column":8},"end":{"line":346,"column":9}},"97":{"start":{"line":337,"column":12},"end":{"line":337,"column":43}},"98":{"start":{"line":339,"column":12},"end":{"line":339,"column":52}},"99":{"start":{"line":340,"column":12},"end":{"line":340,"column":49}},"100":{"start":{"line":341,"column":12},"end":{"line":341,"column":27}},"101":{"start":{"line":342,"column":15},"end":{"line":346,"column":9}},"102":{"start":{"line":343,"column":12},"end":{"line":343,"column":52}},"103":{"start":{"line":344,"column":12},"end":{"line":344,"column":55}},"104":{"start":{"line":345,"column":12},"end":{"line":345,"column":25}},"105":{"start":{"line":347,"column":8},"end":{"line":347,"column":21}},"106":{"start":{"line":355,"column":8},"end":{"line":367,"column":9}},"107":{"start":{"line":356,"column":12},"end":{"line":356,"column":44}},"108":{"start":{"line":357,"column":12},"end":{"line":357,"column":35}},"109":{"start":{"line":358,"column":12},"end":{"line":360,"column":13}},"110":{"start":{"line":359,"column":16},"end":{"line":359,"column":47}},"111":{"start":{"line":361,"column":12},"end":{"line":361,"column":26}},"112":{"start":{"line":362,"column":15},"end":{"line":367,"column":9}},"113":{"start":{"line":364,"column":12},"end":{"line":366,"column":13}},"114":{"start":{"line":365,"column":16},"end":{"line":365,"column":56}},"115":{"start":{"line":368,"column":8},"end":{"line":368,"column":21}},"116":{"start":{"line":376,"column":8},"end":{"line":376,"column":54}},"117":{"start":{"line":377,"column":8},"end":{"line":379,"column":9}},"118":{"start":{"line":378,"column":12},"end":{"line":378,"column":56}},"119":{"start":{"line":387,"column":8},"end":{"line":387,"column":54}},"120":{"start":{"line":388,"column":8},"end":{"line":390,"column":9}},"121":{"start":{"line":389,"column":12},"end":{"line":389,"column":48}},"122":{"start":{"line":397,"column":8},"end":{"line":397,"column":19}},"123":{"start":{"line":399,"column":8},"end":{"line":410,"column":9}},"124":{"start":{"line":400,"column":12},"end":{"line":400,"column":40}},"125":{"start":{"line":401,"column":12},"end":{"line":401,"column":34}},"126":{"start":{"line":402,"column":12},"end":{"line":404,"column":13}},"127":{"start":{"line":403,"column":16},"end":{"line":403,"column":43}},"128":{"start":{"line":405,"column":15},"end":{"line":410,"column":9}},"129":{"start":{"line":407,"column":12},"end":{"line":409,"column":13}},"130":{"start":{"line":408,"column":16},"end":{"line":408,"column":35}}},"branchMap":{"1":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":16},"end":{"line":26,"column":29}},{"start":{"line":26,"column":33},"end":{"line":413,"column":1}}]},"2":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":62,"column":8}},{"start":{"line":62,"column":8},"end":{"line":62,"column":8}}]},"3":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":12},"end":{"line":62,"column":34}},{"start":{"line":62,"column":38},"end":{"line":62,"column":46}}]},"4":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]},"5":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":8},"end":{"line":84,"column":8}},{"start":{"line":84,"column":8},"end":{"line":84,"column":8}}]},"6":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":12},"end":{"line":110,"column":12}},{"start":{"line":110,"column":12},"end":{"line":110,"column":12}}]},"7":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":8},"end":{"line":124,"column":8}},{"start":{"line":124,"column":8},"end":{"line":124,"column":8}}]},"8":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":12},"end":{"line":138,"column":12}},{"start":{"line":138,"column":12},"end":{"line":138,"column":12}}]},"9":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":12},"end":{"line":180,"column":12}},{"start":{"line":180,"column":12},"end":{"line":180,"column":12}}]},"10":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":8},"end":{"line":186,"column":8}},{"start":{"line":186,"column":8},"end":{"line":186,"column":8}}]},"11":{"line":227,"type":"if","locations":[{"start":{"line":227,"column":8},"end":{"line":227,"column":8}},{"start":{"line":227,"column":8},"end":{"line":227,"column":8}}]},"12":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":8},"end":{"line":245,"column":8}},{"start":{"line":245,"column":8},"end":{"line":245,"column":8}}]},"13":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":8},"end":{"line":250,"column":8}},{"start":{"line":250,"column":8},"end":{"line":250,"column":8}}]},"14":{"line":256,"type":"binary-expr","locations":[{"start":{"line":256,"column":15},"end":{"line":256,"column":19}},{"start":{"line":256,"column":23},"end":{"line":256,"column":75}}]},"15":{"line":283,"type":"if","locations":[{"start":{"line":283,"column":8},"end":{"line":283,"column":8}},{"start":{"line":283,"column":8},"end":{"line":283,"column":8}}]},"16":{"line":336,"type":"if","locations":[{"start":{"line":336,"column":8},"end":{"line":336,"column":8}},{"start":{"line":336,"column":8},"end":{"line":336,"column":8}}]},"17":{"line":342,"type":"if","locations":[{"start":{"line":342,"column":15},"end":{"line":342,"column":15}},{"start":{"line":342,"column":15},"end":{"line":342,"column":15}}]},"18":{"line":355,"type":"if","locations":[{"start":{"line":355,"column":8},"end":{"line":355,"column":8}},{"start":{"line":355,"column":8},"end":{"line":355,"column":8}}]},"19":{"line":362,"type":"if","locations":[{"start":{"line":362,"column":15},"end":{"line":362,"column":15}},{"start":{"line":362,"column":15},"end":{"line":362,"column":15}}]},"20":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":12},"end":{"line":364,"column":12}},{"start":{"line":364,"column":12},"end":{"line":364,"column":12}}]},"21":{"line":377,"type":"if","locations":[{"start":{"line":377,"column":8},"end":{"line":377,"column":8}},{"start":{"line":377,"column":8},"end":{"line":377,"column":8}}]},"22":{"line":388,"type":"if","locations":[{"start":{"line":388,"column":8},"end":{"line":388,"column":8}},{"start":{"line":388,"column":8},"end":{"line":388,"column":8}}]},"23":{"line":388,"type":"binary-expr","locations":[{"start":{"line":388,"column":12},"end":{"line":388,"column":32}},{"start":{"line":388,"column":36},"end":{"line":388,"column":62}}]},"24":{"line":399,"type":"if","locations":[{"start":{"line":399,"column":8},"end":{"line":399,"column":8}},{"start":{"line":399,"column":8},"end":{"line":399,"column":8}}]},"25":{"line":405,"type":"if","locations":[{"start":{"line":405,"column":15},"end":{"line":405,"column":15}},{"start":{"line":405,"column":15},"end":{"line":405,"column":15}}]},"26":{"line":407,"type":"if","locations":[{"start":{"line":407,"column":12},"end":{"line":407,"column":12}},{"start":{"line":407,"column":12},"end":{"line":407,"column":12}}]}},"code":["(function () { YUI.add('moodle-editor_atto-editor', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/**"," * Atto editor main class."," * Common functions required by editor plugins."," *"," * @package    editor-atto"," * @copyright  2013 Damyon Wiese  <damyon@moodle.com>"," * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","M.editor_atto = M.editor_atto || {","    /**","     * List of attached button handlers to prevent duplicates.","     */","    buttonhandlers : {},","","    /**","     * List of YUI overlays for custom menus.","     */","    menus : {},","","    /**","     * List of attached menu handlers to prevent duplicates.","     */","    menuhandlers : {},","","    /**","     * List of file picker options for specific editor instances.","     */","    filepickeroptions : {},","","    /**","     * List of buttons and menus that have been added to the toolbar.","     */","    widgets : {},","","    /**","     * Toggle a menu.","     * @param event e","     */","    showhide_menu_handler : function(e) {","        e.preventDefault();","        var disabled = this.getAttribute('disabled');","        var overlayid = this.getAttribute('data-menu');","        var overlay = M.editor_atto.menus[overlayid];","","        if (overlay.get('visible') || disabled) {","            overlay.hide();","        } else {","            overlay.show();","        }","","    },","","    /**","     * Handle clicks on editor buttons.","     * @param event e","     */","    buttonclicked_handler : function(e) {","        var elementid = this.getAttribute('data-editor');","        var plugin = this.getAttribute('data-plugin');","        var handler = this.getAttribute('data-handler');","        var overlay = M.editor_atto.menus[plugin + '_' + elementid];","","        if (overlay) {","            overlay.hide();","        }","","        if (M.editor_atto.is_enabled(elementid, plugin)) {","            // Pass it on.","            handler = M.editor_atto.buttonhandlers[handler];","            return handler(e, elementid);","        }","    },","","    /**","     * Determine if the specified toolbar button/menu is enabled.","     * @param string elementid, the element id of this editor.","     * @param string plugin, the plugin that created the button/menu.","     */","    is_enabled : function(elementid, plugin) {","        var element = Y.one('#' + elementid + '_toolbar .atto_' + plugin + '_button');","","        return !element.hasAttribute('disabled');","    },","    /**","     * Disable all buttons and menus in the toolbar.","     * @param string elementid, the element id of this editor.","     */","    disable_all_widgets : function(elementid) {","        var plugin, element;","        for (plugin in M.editor_atto.widgets) {","            element = Y.one('#' + elementid + '_toolbar .atto_' + plugin + '_button');","","            if (element) {","                element.setAttribute('disabled', 'true');","            }","        }","    },","","    /**","     * Enable a single widget in the toolbar.","     * @param string elementid, the element id of this editor.","     * @param string plugin, the name of the plugin that created the widget.","     */","    enable_widget : function(elementid, plugin) {","        var element = Y.one('#' + elementid + '_toolbar .atto_' + plugin + '_button');","","        if (element) {","            element.removeAttribute('disabled');","        }","    },","","    /**","     * Enable all buttons and menus in the toolbar.","     * @param string elementid, the element id of this editor.","     */","    enable_all_widgets : function(elementid) {","        var plugin, element;","        for (plugin in M.editor_atto.widgets) {","            element = Y.one('#' + elementid + '_toolbar .atto_' + plugin + '_button');","","            if (element) {","                element.removeAttribute('disabled');","            }","        }","    },","","    /**","     * Add a button to the toolbar belonging to the editor for element with id \"elementid\".","     * @param string elementid - the id of the textarea we created this editor from.","     * @param string plugin - the plugin defining the button","     * @param string icon - the html used for the content of the button","     * @handler function handler- A function to call when the button is clicked.","     */","    add_toolbar_menu : function(elementid, plugin, icon, entries) {","        var toolbar = Y.one('#' + elementid + '_toolbar');","        var button = Y.Node.create('<button class=\"atto_' + plugin + '_button atto_hasmenu\" ' +","                                    'data-editor=\"' + Y.Escape.html(elementid) + '\" ' +","                                    'data-menu=\"' + plugin + '_' + elementid + '\" >' +","                                    icon +","                                    '</button>');","","        toolbar.append(button);","","        // Save the name of the plugin.","        M.editor_atto.widgets[plugin] = plugin;","","        var menu = Y.Node.create('<div class=\"atto_' + plugin + '_menu' +","                                 ' atto_menu\" data-editor=\"' + Y.Escape.html(elementid) + '\"></div>');","","        var i = 0, entry = {};","","        for (i = 0; i < entries.length; i++) {","            entry = entries[i];","","            menu.append(Y.Node.create('<div class=\"atto_menuentry\">' +","                                       '<a href=\"#\" class=\"atto_' + plugin + '_action_' + i + '\" ' +","                                       'data-editor=\"' + Y.Escape.html(elementid) + '\" ' +","                                       'data-plugin=\"' + Y.Escape.html(plugin) + '\" ' +","                                       'data-handler=\"' + Y.Escape.html(plugin + '_action_' + i) + '\">' +","                                       entry.text +","                                       '</a>' +","                                       '</div>'));","            if (!M.editor_atto.buttonhandlers[plugin + '_action_' + i]) {","                Y.one('body').delegate('click', M.editor_atto.buttonclicked_handler, '.atto_' + plugin + '_action_' + i);","                M.editor_atto.buttonhandlers[plugin + '_action_' + i] = entry.handler;","            }","        }","","        if (!M.editor_atto.buttonhandlers[plugin]) {","            Y.one('body').delegate('click', M.editor_atto.showhide_menu_handler, '.atto_' + plugin + '_button');","            M.editor_atto.buttonhandlers[plugin] = true;","        }","","        var overlay = new M.core.dialogue({","            bodyContent : menu,","            visible : false,","            width: '14em',","            zindex: 100,","            lightbox: false,","            closeButton: false,","            centered : false,","            align: {node: button, points: [Y.WidgetPositionAlign.TL, Y.WidgetPositionAlign.BL]}","        });","","        M.editor_atto.menus[plugin + '_' + elementid] = overlay;","        overlay.render();","        overlay.hide();","        overlay.headerNode.hide();","    },","","    /**","     * Add a button to the toolbar belonging to the editor for element with id \"elementid\".","     * @param string elementid - the id of the textarea we created this editor from.","     * @param string plugin - the plugin defining the button","     * @param string icon - the html used for the content of the button","     * @handler function handler- A function to call when the button is clicked.","     */","    add_toolbar_button : function(elementid, plugin, icon, handler) {","        var toolbar = Y.one('#' + elementid + '_toolbar');","        var button = Y.Node.create('<button class=\"atto_' + plugin + '_button\" ' +","                                   'data-editor=\"' + Y.Escape.html(elementid) + '\" ' +","                                   'data-plugin=\"' + Y.Escape.html(plugin) + '\" ' +","                                   'data-handler=\"' + Y.Escape.html(plugin) + '\">' +","                                    icon +","                                    '</button>');","","        toolbar.append(button);","","        // We only need to attach this once.","        if (!M.editor_atto.buttonhandlers[plugin]) {","            Y.one('body').delegate('click', M.editor_atto.buttonclicked_handler, '.atto_' + plugin + '_button');","            M.editor_atto.buttonhandlers[plugin] = handler;","        }","","        // Save the name of the plugin.","        M.editor_atto.widgets[plugin] = plugin;","","    },","","    /**","     * Work out if the cursor is in the editable area for this editor instance.","     * @param string elementid of this editor","     * @return bool","     */","    is_active : function(elementid) {","        var selection = M.editor_atto.get_selection();","","        if (selection.length) {","            selection = selection.pop();","        }","","        var node = null;","        if (selection.parentElement) {","            node = Y.one(selection.parentElement());","        } else {","            node = Y.one(selection.startContainer);","        }","","        return node && node.ancestor('#' + elementid + 'editable') !== null;","    },","","    /**","     * Focus on the editable area for this editor.","     * @param string elementid of this editor","     */","    focus : function(elementid) {","        Y.one('#' + elementid + 'editable').focus();","    },","","    /**","     * Initialise the editor","     * @param object params for this editor instance.","     */","    init : function(params) {","        var textarea = Y.one('#' +params.elementid);","        var atto = Y.Node.create('<div id=\"' + params.elementid + 'editable\" ' +","                                            'contenteditable=\"true\" ' +","                                            'spellcheck=\"true\" ' +","                                            'class=\"editor_atto\"/>');","        var cssfont = '';","        var toolbar = Y.Node.create('<div class=\"editor_atto_toolbar\" id=\"' + params.elementid + '_toolbar\"/>');","","        // Bleh - why are we sent a url and not the css to apply directly?","        var css = Y.io(params.content_css, { sync: true });","        var pos = css.responseText.indexOf('font:');","        if (pos) {","            cssfont = css.responseText.substring(pos + 'font:'.length, css.responseText.length - 1);","            atto.setStyle('font', cssfont);","        }","        atto.setStyle('minHeight', (1.2 * (textarea.getAttribute('rows') - 1)) + 'em');","","        // Copy text to editable div.","        atto.append(textarea.get('value'));","","        // Add the toolbar to the page.","        textarea.get('parentNode').insert(toolbar, textarea);","        // Add the editable div to the page.","        textarea.get('parentNode').insert(atto, textarea);","        atto.setStyle('color', textarea.getStyle('color'));","        atto.setStyle('lineHeight', textarea.getStyle('lineHeight'));","        atto.setStyle('fontSize', textarea.getStyle('fontSize'));","        // Hide the old textarea.","        textarea.hide();","","        // Copy the current value back to the textarea when focus leaves us.","        atto.on('blur', function() {","            textarea.set('value', atto.getHTML());","        });","","        // Save the file picker options for later.","        M.editor_atto.filepickeroptions[params.elementid] = params.filepickeroptions;","    },","","    /**","     * Show the filepicker.","     * @param string elementid for this editor instance.","     * @param string type The media type for the file picker","     * @param function callback","     */","    show_filepicker : function(elementid, type, callback) {","        Y.use('core_filepicker', function (Y) {","            var options = M.editor_atto.filepickeroptions[elementid][type];","","            options.formcallback = callback;","            options.editor_target = Y.one(elementid);","","            M.core_filepicker.show(Y, options);","        });","    },","","    /**","     * Create a cross browser selection object that represents a yui node.","     * @param Node yui node for the selection","     * @return range (browser dependent)","     */","    get_selection_from_node: function(node) {","        var range;","","        if (window.getSelection) {","            range = document.createRange();","","            range.setStartBefore(node.getDOMNode());","            range.setEndAfter(node.getDOMNode());","            return [range];","        } else if (document.selection) {","            range = document.body.createTextRange();","            range.moveToElementText(node.getDOMNode());","            return range;","        }","        return false;","    },","","    /**","     * Get the selection object that can be passed back to set_selection.","     * @return range (browser dependent)","     */","    get_selection : function() {","        if (window.getSelection) {","            var sel = window.getSelection();","            var ranges = [], i = 0;","            for (i = 0; i < sel.rangeCount; i++) {","                ranges.push(sel.getRangeAt(i));","            }","            return ranges;","        } else if (document.selection) {","            // IE < 9","            if (document.selection.createRange) {","                return document.selection.createRange();","            }","        }","        return false;","    },","","    /**","     * Get the dom node representing the common anscestor of the selection nodes.","     * @return DOMNode","     */","    get_selection_parent_node : function() {","        var selection = M.editor_atto.get_selection();","        if (selection.length > 0) {","            return selection[0].commonAncestorContainer;","        }","    },","","    /**","     * Get the list of child nodes of the selection.","     * @return DOMNode[]","     */","    get_selection_text : function() {","        var selection = M.editor_atto.get_selection();","        if (selection.length > 0 && selection[0].cloneContents) {","            return selection[0].cloneContents();","        }","    },","","    /**","     * Set the current selection. Used to restore a selection.","     */","    set_selection : function(selection) {","        var sel, i;","","        if (window.getSelection) {","            sel = window.getSelection();","            sel.removeAllRanges();","            for (i = 0; i < selection.length; i++) {","                sel.addRange(selection[i]);","            }","        } else if (document.selection) {","            // IE < 9","            if (selection.select) {","                selection.select();","            }","        }","    }","","};","","","}, '@VERSION@', {\"requires\": [\"node\", \"io\", \"overlay\", \"escape\", \"moodle-core-notification\"]});","","}());"]};
}
var __cov_jIzhftsW9fNkNbDi4Y2RFw = __coverage__['lib/editor/atto/yui/build/moodle-editor_atto-editor/moodle-editor_atto-editor.js'];
__cov_jIzhftsW9fNkNbDi4Y2RFw.s['1']++;YUI.add('moodle-editor_atto-editor',function(Y,NAME){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['1']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['2']++;M.editor_atto=(__cov_jIzhftsW9fNkNbDi4Y2RFw.b['1'][0]++,M.editor_atto)||(__cov_jIzhftsW9fNkNbDi4Y2RFw.b['1'][1]++,{buttonhandlers:{},menus:{},menuhandlers:{},filepickeroptions:{},widgets:{},showhide_menu_handler:function(e){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['2']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['3']++;e.preventDefault();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['4']++;var disabled=this.getAttribute('disabled');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['5']++;var overlayid=this.getAttribute('data-menu');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['6']++;var overlay=M.editor_atto.menus[overlayid];__cov_jIzhftsW9fNkNbDi4Y2RFw.s['7']++;if((__cov_jIzhftsW9fNkNbDi4Y2RFw.b['3'][0]++,overlay.get('visible'))||(__cov_jIzhftsW9fNkNbDi4Y2RFw.b['3'][1]++,disabled)){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['2'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['8']++;overlay.hide();}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['2'][1]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['9']++;overlay.show();}},buttonclicked_handler:function(e){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['3']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['10']++;var elementid=this.getAttribute('data-editor');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['11']++;var plugin=this.getAttribute('data-plugin');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['12']++;var handler=this.getAttribute('data-handler');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['13']++;var overlay=M.editor_atto.menus[plugin+'_'+elementid];__cov_jIzhftsW9fNkNbDi4Y2RFw.s['14']++;if(overlay){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['4'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['15']++;overlay.hide();}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['4'][1]++;}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['16']++;if(M.editor_atto.is_enabled(elementid,plugin)){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['5'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['17']++;handler=M.editor_atto.buttonhandlers[handler];__cov_jIzhftsW9fNkNbDi4Y2RFw.s['18']++;return handler(e,elementid);}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['5'][1]++;}},is_enabled:function(elementid,plugin){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['4']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['19']++;var element=Y.one('#'+elementid+'_toolbar .atto_'+plugin+'_button');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['20']++;return!element.hasAttribute('disabled');},disable_all_widgets:function(elementid){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['5']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['21']++;var plugin,element;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['22']++;for(plugin in M.editor_atto.widgets){__cov_jIzhftsW9fNkNbDi4Y2RFw.s['23']++;element=Y.one('#'+elementid+'_toolbar .atto_'+plugin+'_button');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['24']++;if(element){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['6'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['25']++;element.setAttribute('disabled','true');}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['6'][1]++;}}},enable_widget:function(elementid,plugin){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['6']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['26']++;var element=Y.one('#'+elementid+'_toolbar .atto_'+plugin+'_button');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['27']++;if(element){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['7'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['28']++;element.removeAttribute('disabled');}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['7'][1]++;}},enable_all_widgets:function(elementid){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['7']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['29']++;var plugin,element;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['30']++;for(plugin in M.editor_atto.widgets){__cov_jIzhftsW9fNkNbDi4Y2RFw.s['31']++;element=Y.one('#'+elementid+'_toolbar .atto_'+plugin+'_button');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['32']++;if(element){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['8'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['33']++;element.removeAttribute('disabled');}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['8'][1]++;}}},add_toolbar_menu:function(elementid,plugin,icon,entries){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['8']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['34']++;var toolbar=Y.one('#'+elementid+'_toolbar');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['35']++;var button=Y.Node.create('<button class="atto_'+plugin+'_button atto_hasmenu" '+'data-editor="'+Y.Escape.html(elementid)+'" '+'data-menu="'+plugin+'_'+elementid+'" >'+icon+'</button>');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['36']++;toolbar.append(button);__cov_jIzhftsW9fNkNbDi4Y2RFw.s['37']++;M.editor_atto.widgets[plugin]=plugin;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['38']++;var menu=Y.Node.create('<div class="atto_'+plugin+'_menu'+' atto_menu" data-editor="'+Y.Escape.html(elementid)+'"></div>');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['39']++;var i=0,entry={};__cov_jIzhftsW9fNkNbDi4Y2RFw.s['40']++;for(i=0;i<entries.length;i++){__cov_jIzhftsW9fNkNbDi4Y2RFw.s['41']++;entry=entries[i];__cov_jIzhftsW9fNkNbDi4Y2RFw.s['42']++;menu.append(Y.Node.create('<div class="atto_menuentry">'+'<a href="#" class="atto_'+plugin+'_action_'+i+'" '+'data-editor="'+Y.Escape.html(elementid)+'" '+'data-plugin="'+Y.Escape.html(plugin)+'" '+'data-handler="'+Y.Escape.html(plugin+'_action_'+i)+'">'+entry.text+'</a>'+'</div>'));__cov_jIzhftsW9fNkNbDi4Y2RFw.s['43']++;if(!M.editor_atto.buttonhandlers[plugin+'_action_'+i]){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['9'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['44']++;Y.one('body').delegate('click',M.editor_atto.buttonclicked_handler,'.atto_'+plugin+'_action_'+i);__cov_jIzhftsW9fNkNbDi4Y2RFw.s['45']++;M.editor_atto.buttonhandlers[plugin+'_action_'+i]=entry.handler;}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['9'][1]++;}}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['46']++;if(!M.editor_atto.buttonhandlers[plugin]){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['10'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['47']++;Y.one('body').delegate('click',M.editor_atto.showhide_menu_handler,'.atto_'+plugin+'_button');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['48']++;M.editor_atto.buttonhandlers[plugin]=true;}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['10'][1]++;}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['49']++;var overlay=new M.core.dialogue({bodyContent:menu,visible:false,width:'14em',zindex:100,lightbox:false,closeButton:false,centered:false,align:{node:button,points:[Y.WidgetPositionAlign.TL,Y.WidgetPositionAlign.BL]}});__cov_jIzhftsW9fNkNbDi4Y2RFw.s['50']++;M.editor_atto.menus[plugin+'_'+elementid]=overlay;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['51']++;overlay.render();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['52']++;overlay.hide();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['53']++;overlay.headerNode.hide();},add_toolbar_button:function(elementid,plugin,icon,handler){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['9']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['54']++;var toolbar=Y.one('#'+elementid+'_toolbar');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['55']++;var button=Y.Node.create('<button class="atto_'+plugin+'_button" '+'data-editor="'+Y.Escape.html(elementid)+'" '+'data-plugin="'+Y.Escape.html(plugin)+'" '+'data-handler="'+Y.Escape.html(plugin)+'">'+icon+'</button>');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['56']++;toolbar.append(button);__cov_jIzhftsW9fNkNbDi4Y2RFw.s['57']++;if(!M.editor_atto.buttonhandlers[plugin]){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['11'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['58']++;Y.one('body').delegate('click',M.editor_atto.buttonclicked_handler,'.atto_'+plugin+'_button');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['59']++;M.editor_atto.buttonhandlers[plugin]=handler;}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['11'][1]++;}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['60']++;M.editor_atto.widgets[plugin]=plugin;},is_active:function(elementid){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['10']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['61']++;var selection=M.editor_atto.get_selection();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['62']++;if(selection.length){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['12'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['63']++;selection=selection.pop();}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['12'][1]++;}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['64']++;var node=null;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['65']++;if(selection.parentElement){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['13'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['66']++;node=Y.one(selection.parentElement());}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['13'][1]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['67']++;node=Y.one(selection.startContainer);}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['68']++;return(__cov_jIzhftsW9fNkNbDi4Y2RFw.b['14'][0]++,node)&&(__cov_jIzhftsW9fNkNbDi4Y2RFw.b['14'][1]++,node.ancestor('#'+elementid+'editable')!==null);},focus:function(elementid){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['11']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['69']++;Y.one('#'+elementid+'editable').focus();},init:function(params){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['12']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['70']++;var textarea=Y.one('#'+params.elementid);__cov_jIzhftsW9fNkNbDi4Y2RFw.s['71']++;var atto=Y.Node.create('<div id="'+params.elementid+'editable" '+'contenteditable="true" '+'spellcheck="true" '+'class="editor_atto"/>');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['72']++;var cssfont='';__cov_jIzhftsW9fNkNbDi4Y2RFw.s['73']++;var toolbar=Y.Node.create('<div class="editor_atto_toolbar" id="'+params.elementid+'_toolbar"/>');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['74']++;var css=Y.io(params.content_css,{sync:true});__cov_jIzhftsW9fNkNbDi4Y2RFw.s['75']++;var pos=css.responseText.indexOf('font:');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['76']++;if(pos){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['15'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['77']++;cssfont=css.responseText.substring(pos+'font:'.length,css.responseText.length-1);__cov_jIzhftsW9fNkNbDi4Y2RFw.s['78']++;atto.setStyle('font',cssfont);}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['15'][1]++;}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['79']++;atto.setStyle('minHeight',1.2*(textarea.getAttribute('rows')-1)+'em');__cov_jIzhftsW9fNkNbDi4Y2RFw.s['80']++;atto.append(textarea.get('value'));__cov_jIzhftsW9fNkNbDi4Y2RFw.s['81']++;textarea.get('parentNode').insert(toolbar,textarea);__cov_jIzhftsW9fNkNbDi4Y2RFw.s['82']++;textarea.get('parentNode').insert(atto,textarea);__cov_jIzhftsW9fNkNbDi4Y2RFw.s['83']++;atto.setStyle('color',textarea.getStyle('color'));__cov_jIzhftsW9fNkNbDi4Y2RFw.s['84']++;atto.setStyle('lineHeight',textarea.getStyle('lineHeight'));__cov_jIzhftsW9fNkNbDi4Y2RFw.s['85']++;atto.setStyle('fontSize',textarea.getStyle('fontSize'));__cov_jIzhftsW9fNkNbDi4Y2RFw.s['86']++;textarea.hide();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['87']++;atto.on('blur',function(){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['13']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['88']++;textarea.set('value',atto.getHTML());});__cov_jIzhftsW9fNkNbDi4Y2RFw.s['89']++;M.editor_atto.filepickeroptions[params.elementid]=params.filepickeroptions;},show_filepicker:function(elementid,type,callback){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['14']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['90']++;Y.use('core_filepicker',function(Y){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['15']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['91']++;var options=M.editor_atto.filepickeroptions[elementid][type];__cov_jIzhftsW9fNkNbDi4Y2RFw.s['92']++;options.formcallback=callback;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['93']++;options.editor_target=Y.one(elementid);__cov_jIzhftsW9fNkNbDi4Y2RFw.s['94']++;M.core_filepicker.show(Y,options);});},get_selection_from_node:function(node){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['16']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['95']++;var range;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['96']++;if(window.getSelection){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['16'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['97']++;range=document.createRange();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['98']++;range.setStartBefore(node.getDOMNode());__cov_jIzhftsW9fNkNbDi4Y2RFw.s['99']++;range.setEndAfter(node.getDOMNode());__cov_jIzhftsW9fNkNbDi4Y2RFw.s['100']++;return[range];}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['16'][1]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['101']++;if(document.selection){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['17'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['102']++;range=document.body.createTextRange();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['103']++;range.moveToElementText(node.getDOMNode());__cov_jIzhftsW9fNkNbDi4Y2RFw.s['104']++;return range;}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['17'][1]++;}}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['105']++;return false;},get_selection:function(){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['17']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['106']++;if(window.getSelection){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['18'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['107']++;var sel=window.getSelection();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['108']++;var ranges=[],i=0;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['109']++;for(i=0;i<sel.rangeCount;i++){__cov_jIzhftsW9fNkNbDi4Y2RFw.s['110']++;ranges.push(sel.getRangeAt(i));}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['111']++;return ranges;}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['18'][1]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['112']++;if(document.selection){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['19'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['113']++;if(document.selection.createRange){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['20'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['114']++;return document.selection.createRange();}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['20'][1]++;}}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['19'][1]++;}}__cov_jIzhftsW9fNkNbDi4Y2RFw.s['115']++;return false;},get_selection_parent_node:function(){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['18']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['116']++;var selection=M.editor_atto.get_selection();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['117']++;if(selection.length>0){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['21'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['118']++;return selection[0].commonAncestorContainer;}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['21'][1]++;}},get_selection_text:function(){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['19']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['119']++;var selection=M.editor_atto.get_selection();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['120']++;if((__cov_jIzhftsW9fNkNbDi4Y2RFw.b['23'][0]++,selection.length>0)&&(__cov_jIzhftsW9fNkNbDi4Y2RFw.b['23'][1]++,selection[0].cloneContents)){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['22'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['121']++;return selection[0].cloneContents();}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['22'][1]++;}},set_selection:function(selection){__cov_jIzhftsW9fNkNbDi4Y2RFw.f['20']++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['122']++;var sel,i;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['123']++;if(window.getSelection){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['24'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['124']++;sel=window.getSelection();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['125']++;sel.removeAllRanges();__cov_jIzhftsW9fNkNbDi4Y2RFw.s['126']++;for(i=0;i<selection.length;i++){__cov_jIzhftsW9fNkNbDi4Y2RFw.s['127']++;sel.addRange(selection[i]);}}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['24'][1]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['128']++;if(document.selection){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['25'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['129']++;if(selection.select){__cov_jIzhftsW9fNkNbDi4Y2RFw.b['26'][0]++;__cov_jIzhftsW9fNkNbDi4Y2RFw.s['130']++;selection.select();}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['26'][1]++;}}else{__cov_jIzhftsW9fNkNbDi4Y2RFw.b['25'][1]++;}}}});},'@VERSION@',{'requires':['node','io','overlay','escape','moodle-core-notification']});
