YUI.add("moodle-atto_emoticon-button",function(e,t){var n="atto_emoticon",r="atto_emoticon_emote",i="atto_emoticon_map",s=".atto_emoticon_emote",o='<div class="{{CSSMAP}}"><ul>{{#each emoticons}}<li><div><a href="#" class="{{../CSSEMOTE}}" data-text="{{text}}"><img {{imagename}} src="{{image_url imagename imagecomponent}}" alt="{{emotealt}}"/></a></div><div>{{text}}</div><div>{{get_string altidentifier altcomponent}}</div></li>{{/each}}</ul></div>';e.namespace("M.atto_emoticon").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){this.addButton({icon:"e/emoticons",callback:this.chooseEmoticon})},chooseEmoticon:function(){this._currentSelection=this.get("host").getSelection();if(this._currentSelection===!1)return;var e=this.getDialogue({headerContent:M.util.get_string("insertemoticon",n),focusAfterHide:!0},!0);e.set("bodyContent",this._getDialogueContent()).show()},insertEmote:function(e){var t=e.target.ancestor(s,!0),n=this.get("host");e.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var r=" "+t.getData("text")+" ";n.setSelection(this._currentSelection),n.insertContentAtFocusPoint(r),this.markUpdated()},_getDialogueContent:function(){var t=e.Handlebars.compile(o),n=e.Node.create(t({emoticons:this.get("emoticons"),CSSMAP:i,CSSEMOTE:r}));return n.delegate("click",this.insertEmote,s,this),n.delegate("key",this.insertEmote,"32",s,this),n}},{ATTRS:{emoticons:{value:{}}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
