YUI.add("moodle-atto_backcolor-button",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}e.namespace("M.atto_backcolor").Button=e.extend(n,e.M.editor_atto.EditorPlugin,{initializer:function(){this.addBasicButton({exec:"backcolor"})},setup:function(){var e={white:"#FFFFFF",red:"#EF4540",yellow:"#FFCF35",green:"#98CA3E",blue:"#7D9FD3",black:"#333333"},t="width: 20px; height: 20px; border: 1px solid #CCC; background-color: ",n='<div style="'+t+rgb_white+'"></div>',r='<div style="'+t+rgb_red+'"></div>',i='<div style="'+t+rgb_yellow+'"></div>',s='<div style="'+t+rgb_green+'"></div>',o='<div style="'+t+rgb_blue+'"></div>',u='<div style="'+t+rgb_black+'"></div>',a=M.util.image_url("e/text_highlight","core");M.editor_atto.add_toolbar_menu(params.elementid,plugin,a,params.group,[{text:n,handler:click_white},{text:r,handler:click_red},{text:i,handler:click_yellow},{text:s,handler:click_green},{text:o,handler:click_blue},{text:u,handler:click_black}],"4")}}),M.atto_backcolor=M.atto_backcolor||{init:function(e){var t="backcolor",n="#FFFFFF",r="#EF4540",i="#FFCF35",s="#98CA3E",o="#7D9FD3",u="#333333",a=function(e,t){M.atto_backcolor.change_color(e,t,n)},f=function(e,t){M.atto_backcolor.change_color(e,t,r)},l=function(e,t){M.atto_backcolor.change_color(e,t,i)},c=function(e,t){M.atto_backcolor.change_color(e,t,s)},h=function(e,t){M.atto_backcolor.change_color(e,t,o)},p=function(e,t){M.atto_backcolor.change_color(e,t,u)},d="width: 20px; height: 20px; border: 1px solid #CCC; background-color: ",v='<div style="'+d+n+'"></div>',m='<div style="'+d+r+'"></div>',g='<div style="'+d+i+'"></div>',y='<div style="'+d+s+'"></div>',b='<div style="'+d+o+'"></div>',w='<div style="'+d+u+'"></div>',E=M.util.image_url("e/text_highlight","core");M.editor_atto.add_toolbar_menu(e.elementid,t,E,e.group,[{text:v,handler:a},{text:m,handler:f},{text:g,handler:l},{text:y,handler:c},{text:b,handler:h},{text:w,handler:p}],"4")},change_color:function(e,t,n){e.preventDefault(),M.editor_atto.is_active(t)||M.editor_atto.focus(t);if(window.getSelection)try{document.execCommand("BackColor",!1,n)||M.atto_backcolor.set_back_color(n)}catch(r){M.atto_backcolor.set_back_color(n)}else document.selection&&document.selection.createRange&&(range=document.selection.createRange(),range.execCommand("BackColor",!1,n));M.editor_atto.text_updated(t)},set_back_color:function(e){var t=window.getSelection(),n=null;t.rangeCount&&t.getRangeAt&&(n=t.getRangeAt(0)),document.designMode="on",n&&(t.removeAllRanges(),t.addRange(n)),document.execCommand("HiliteColor",!1,e)||document.execCommand("BackColor",!1,e),document.designMode="off"}}},"@VERSION@");
