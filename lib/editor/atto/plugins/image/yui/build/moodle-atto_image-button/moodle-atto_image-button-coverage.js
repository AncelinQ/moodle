if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['lib/editor/atto/plugins/image/yui/build/moodle-atto_image-button/moodle-atto_image-button.js']) {
   __coverage__['lib/editor/atto/plugins/image/yui/build/moodle-atto_image-button/moodle-atto_image-button.js'] = {"path":"lib/editor/atto/plugins/image/yui/build/moodle-atto_image-button/moodle-atto_image-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":55}}},"2":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":11},"end":{"line":28,"column":28}}},"3":{"name":"(anonymous_3)","line":29,"loc":{"start":{"line":29,"column":30},"end":{"line":29,"column":53}}},"4":{"name":"(anonymous_4)","line":92,"loc":{"start":{"line":92,"column":22},"end":{"line":92,"column":34}}},"5":{"name":"(anonymous_5)","line":98,"loc":{"start":{"line":98,"column":26},"end":{"line":98,"column":43}}},"6":{"name":"(anonymous_6)","line":107,"loc":{"start":{"line":107,"column":27},"end":{"line":107,"column":38}}},"7":{"name":"(anonymous_7)","line":116,"loc":{"start":{"line":116,"column":16},"end":{"line":116,"column":28}}},"8":{"name":"(anonymous_8)","line":148,"loc":{"start":{"line":148,"column":23},"end":{"line":148,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":184,"column":50}},"2":{"start":{"line":25,"column":0},"end":{"line":181,"column":2}},"3":{"start":{"line":29,"column":8},"end":{"line":88,"column":10}},"4":{"start":{"line":30,"column":12},"end":{"line":30,"column":31}},"5":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"6":{"start":{"line":32,"column":16},"end":{"line":32,"column":47}},"7":{"start":{"line":34,"column":12},"end":{"line":34,"column":67}},"8":{"start":{"line":35,"column":12},"end":{"line":87,"column":13}},"9":{"start":{"line":36,"column":16},"end":{"line":36,"column":29}},"10":{"start":{"line":37,"column":16},"end":{"line":46,"column":17}},"11":{"start":{"line":38,"column":20},"end":{"line":43,"column":23}},"12":{"start":{"line":45,"column":20},"end":{"line":45,"column":53}},"13":{"start":{"line":48,"column":16},"end":{"line":48,"column":86}},"14":{"start":{"line":49,"column":16},"end":{"line":49,"column":94}},"15":{"start":{"line":50,"column":16},"end":{"line":50,"column":34}},"16":{"start":{"line":51,"column":16},"end":{"line":51,"column":42}},"17":{"start":{"line":52,"column":16},"end":{"line":52,"column":49}},"18":{"start":{"line":54,"column":16},"end":{"line":54,"column":70}},"19":{"start":{"line":55,"column":16},"end":{"line":55,"column":26}},"20":{"start":{"line":57,"column":16},"end":{"line":57,"column":32}},"21":{"start":{"line":58,"column":16},"end":{"line":69,"column":17}},"22":{"start":{"line":59,"column":20},"end":{"line":59,"column":59}},"23":{"start":{"line":60,"column":20},"end":{"line":68,"column":21}},"24":{"start":{"line":61,"column":24},"end":{"line":67,"column":25}},"25":{"start":{"line":62,"column":28},"end":{"line":62,"column":46}},"26":{"start":{"line":64,"column":28},"end":{"line":66,"column":29}},"27":{"start":{"line":65,"column":32},"end":{"line":65,"column":75}},"28":{"start":{"line":71,"column":16},"end":{"line":85,"column":17}},"29":{"start":{"line":72,"column":20},"end":{"line":72,"column":49}},"30":{"start":{"line":73,"column":20},"end":{"line":73,"column":60}},"31":{"start":{"line":74,"column":20},"end":{"line":74,"column":62}},"32":{"start":{"line":75,"column":20},"end":{"line":77,"column":21}},"33":{"start":{"line":76,"column":24},"end":{"line":76,"column":76}},"34":{"start":{"line":78,"column":20},"end":{"line":80,"column":21}},"35":{"start":{"line":79,"column":24},"end":{"line":79,"column":78}},"36":{"start":{"line":81,"column":20},"end":{"line":81,"column":78}},"37":{"start":{"line":82,"column":20},"end":{"line":82,"column":79}},"38":{"start":{"line":83,"column":20},"end":{"line":83,"column":81}},"39":{"start":{"line":84,"column":20},"end":{"line":84,"column":81}},"40":{"start":{"line":86,"column":16},"end":{"line":86,"column":32}},"41":{"start":{"line":90,"column":8},"end":{"line":90,"column":104}},"42":{"start":{"line":93,"column":8},"end":{"line":93,"column":57}},"43":{"start":{"line":94,"column":8},"end":{"line":94,"column":27}},"44":{"start":{"line":96,"column":8},"end":{"line":96,"column":92}},"45":{"start":{"line":99,"column":8},"end":{"line":114,"column":9}},"46":{"start":{"line":100,"column":12},"end":{"line":100,"column":54}},"47":{"start":{"line":101,"column":12},"end":{"line":101,"column":43}},"48":{"start":{"line":102,"column":12},"end":{"line":102,"column":50}},"49":{"start":{"line":103,"column":12},"end":{"line":103,"column":44}},"50":{"start":{"line":106,"column":12},"end":{"line":106,"column":36}},"51":{"start":{"line":107,"column":12},"end":{"line":112,"column":14}},"52":{"start":{"line":108,"column":16},"end":{"line":108,"column":73}},"53":{"start":{"line":109,"column":16},"end":{"line":109,"column":75}},"54":{"start":{"line":110,"column":16},"end":{"line":110,"column":66}},"55":{"start":{"line":111,"column":16},"end":{"line":111,"column":75}},"56":{"start":{"line":113,"column":12},"end":{"line":113,"column":35}},"57":{"start":{"line":117,"column":8},"end":{"line":117,"column":27}},"58":{"start":{"line":118,"column":8},"end":{"line":118,"column":37}},"59":{"start":{"line":120,"column":8},"end":{"line":120,"column":82}},"60":{"start":{"line":122,"column":8},"end":{"line":122,"column":37}},"61":{"start":{"line":123,"column":8},"end":{"line":123,"column":78}},"62":{"start":{"line":124,"column":8},"end":{"line":124,"column":37}},"63":{"start":{"line":125,"column":8},"end":{"line":125,"column":80}},"64":{"start":{"line":126,"column":8},"end":{"line":126,"column":39}},"65":{"start":{"line":127,"column":8},"end":{"line":127,"column":81}},"66":{"start":{"line":128,"column":8},"end":{"line":128,"column":40}},"67":{"start":{"line":129,"column":8},"end":{"line":146,"column":9}},"68":{"start":{"line":130,"column":12},"end":{"line":130,"column":64}},"69":{"start":{"line":131,"column":12},"end":{"line":131,"column":101}},"70":{"start":{"line":133,"column":12},"end":{"line":135,"column":13}},"71":{"start":{"line":134,"column":16},"end":{"line":134,"column":69}},"72":{"start":{"line":136,"column":12},"end":{"line":138,"column":13}},"73":{"start":{"line":137,"column":16},"end":{"line":137,"column":71}},"74":{"start":{"line":139,"column":12},"end":{"line":139,"column":31}},"75":{"start":{"line":141,"column":12},"end":{"line":145,"column":13}},"76":{"start":{"line":142,"column":16},"end":{"line":142,"column":70}},"77":{"start":{"line":144,"column":16},"end":{"line":144,"column":69}},"78":{"start":{"line":149,"column":8},"end":{"line":175,"column":93}},"79":{"start":{"line":177,"column":8},"end":{"line":177,"column":86}},"80":{"start":{"line":178,"column":8},"end":{"line":178,"column":83}},"81":{"start":{"line":179,"column":8},"end":{"line":179,"column":23}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":15},"end":{"line":25,"column":27}},{"start":{"line":25,"column":31},"end":{"line":181,"column":1}}]},"2":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":12}},{"start":{"line":31,"column":12},"end":{"line":31,"column":12}}]},"3":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":12}},{"start":{"line":35,"column":12},"end":{"line":35,"column":12}}]},"4":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":16},"end":{"line":37,"column":16}},{"start":{"line":37,"column":16},"end":{"line":37,"column":16}}]},"5":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":20},"end":{"line":60,"column":20}},{"start":{"line":60,"column":20},"end":{"line":60,"column":20}}]},"6":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":24},"end":{"line":61,"column":24}},{"start":{"line":61,"column":24},"end":{"line":61,"column":24}}]},"7":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":28},"end":{"line":64,"column":28}},{"start":{"line":64,"column":28},"end":{"line":64,"column":28}}]},"8":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":16},"end":{"line":71,"column":16}},{"start":{"line":71,"column":16},"end":{"line":71,"column":16}}]},"9":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":20},"end":{"line":75,"column":20}},{"start":{"line":75,"column":20},"end":{"line":75,"column":20}}]},"10":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":20},"end":{"line":78,"column":20}},{"start":{"line":78,"column":20},"end":{"line":78,"column":20}}]},"11":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":8},"end":{"line":99,"column":8}},{"start":{"line":99,"column":8},"end":{"line":99,"column":8}}]},"12":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"13":{"line":129,"type":"binary-expr","locations":[{"start":{"line":129,"column":12},"end":{"line":129,"column":22}},{"start":{"line":129,"column":26},"end":{"line":129,"column":36}}]},"14":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":12},"end":{"line":133,"column":12}},{"start":{"line":133,"column":12},"end":{"line":133,"column":12}}]},"15":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":12},"end":{"line":136,"column":12}},{"start":{"line":136,"column":12},"end":{"line":136,"column":12}}]},"16":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":12},"end":{"line":141,"column":12}},{"start":{"line":141,"column":12},"end":{"line":141,"column":12}}]},"17":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":16},"end":{"line":141,"column":34}},{"start":{"line":141,"column":38},"end":{"line":141,"column":80}}]}},"code":["(function () { YUI.add('moodle-atto_image-button', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/**"," * Atto text editor image plugin."," *"," * @package    editor-atto"," * @copyright  2013 Damyon Wiese  <damyon@moodle.com>"," * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","M.atto_image = M.atto_image || {","    dialogue : null,","    selection : null,","    init : function(params) {","        var display_chooser = function(e, elementid) {","            e.preventDefault();","            if (!M.editor_atto.is_active(elementid)) {","                M.editor_atto.focus(elementid);","            }","            M.atto_image.selection = M.editor_atto.get_selection();","            if (M.atto_image.selection !== false) {","                var dialogue;","                if (!M.atto_image.dialogue) {","                    dialogue = new M.core.dialogue({","                        visible: false,","                        modal: true,","                        close: true,","                        draggable: true","                    });","                } else {","                    dialogue = M.atto_image.dialogue;","                }","","                dialogue.set('bodyContent', M.atto_image.get_form_content(elementid));","                dialogue.set('headerContent', M.util.get_string('createimage', 'atto_image'));","                dialogue.render();","                dialogue.centerDialogue();","                M.atto_image.dialogue = dialogue;","","                var selectedText = M.editor_atto.get_selection_text();","                var i = 0;","","                var images = [];","                for (i = 0; i < selectedText.childNodes.length; i++) {","                    var child = selectedText.childNodes[0];","                    if (images.length === 0) {","                        if (child.nodeName.toLowerCase() === 'img') {","                            images[0] = child;","                        } else {","                            if (child.getElementsByTagName) {","                                images = child.getElementsByTagName('img');","                            }","                        }","                    }","                }","","                if (images.length > 0) {","                    var image = Y.one(images[0]);","                    var width = image.getAttribute('width');","                    var height = image.getAttribute('height');","                    if (width > 0) {","                        Y.one('#atto_image_widthentry').set('value', width);","                    }","                    if (height > 0) {","                        Y.one('#atto_image_heightentry').set('value', height);","                    }","                    Y.one('#atto_image_preview').set('src', image.get('src'));","                    Y.one('#atto_image_preview').setStyle('display', 'inline');","                    Y.one('#atto_image_altentry').set('value', image.get('alt'));","                    Y.one('#atto_image_urlentry').set('value', image.get('src'));","                }","                dialogue.show();","            }","        };","","        M.editor_atto.add_toolbar_button(params.elementid, 'image', params.icon, display_chooser, this);","    },","    open_filepicker : function(e) {","        var elementid = this.getAttribute('data-editor');","        e.preventDefault();","","        M.editor_atto.show_filepicker(elementid, 'image', M.atto_image.filepicker_callback);","    },","    filepicker_callback : function(params) {","        if (params.url !== '') {","            var input = Y.one('#atto_image_urlentry');","            input.set('value', params.url);","            input = Y.one('#atto_image_altentry');","            input.set('value', params.file);","","            // Auto set the width and height.","            var image = new Image();","            image.onload = function() {","                Y.one('#atto_image_widthentry').set('value', this.width);","                Y.one('#atto_image_heightentry').set('value', this.height);","                Y.one('#atto_image_preview').set('src', this.src);","                Y.one('#atto_image_preview').setStyle('display', 'inline');","            };","            image.src = params.url;","        }","    },","    set_image : function(e) {","        e.preventDefault();","        M.atto_image.dialogue.hide();","","        var input = e.currentTarget.get('parentNode').one('#atto_image_urlentry');","","        var url = input.get('value');","        input = e.currentTarget.get('parentNode').one('#atto_image_altentry');","        var alt = input.get('value');","        input = e.currentTarget.get('parentNode').one('#atto_image_widthentry');","        var width = input.get('value');","        input = e.currentTarget.get('parentNode').one('#atto_image_heightentry');","        var height = input.get('value');","        if (url !== '' && alt !== '') {","            M.editor_atto.set_selection(M.atto_image.selection);","            var imagehtml = '<img src=\"' + Y.Escape.html(url) + '\" alt=\"' + Y.Escape.html(alt) + '\"';","","            if (width) {","                imagehtml += ' width=\"' + Y.Escape.html(width) + '\"';","            }","            if (height) {","                imagehtml += ' height=\"' + Y.Escape.html(height) + '\"';","            }","            imagehtml += '\"/>';","","            if (document.selection && document.selection.createRange().pasteHTML) {","                document.selection.createRange().pasteHTML(imagehtml);","            } else {","                document.execCommand('insertHTML', false, imagehtml);","            }","        }","    },","    get_form_content : function(elementid) {","        var content = Y.Node.create('<form class=\"atto_form\">' +","                             '<label for=\"atto_image_urlentry\">' + M.util.get_string('enterurl', 'atto_image') +","                             '</label>' +","                             '<input type=\"url\" value=\"\" id=\"atto_image_urlentry\" size=\"32\"/>' +","                             '<label for=\"atto_image_altentry\">' + M.util.get_string('enteralt', 'atto_image') +","                             '</label>' +","                             '<input type=\"text\" value=\"\" id=\"atto_image_altentry\" size=\"32\" required=\"true\"/>' +","                             '<label for=\"atto_image_widthentry\">' + M.util.get_string('width', 'atto_image') +","                             '</label>' +","                             '<input type=\"text\" value=\"\" id=\"atto_image_widthentry\" size=\"10\"/>' +","                             '<br/>' +","                             '<label for=\"atto_image_heightentry\">' + M.util.get_string('height', 'atto_image') +","                             '</label>' +","                             '<input type=\"text\" value=\"\" id=\"atto_image_heightentry\" size=\"10\"/>' +","                             '<label for=\"atto_image_preview\">' + M.util.get_string('preview', 'atto_image') +","                             '</label>' +","                             '<img src=\"#\" width=\"200\" id=\"atto_image_preview\" alt=\"\" style=\"display: none;\"/>' +","                             '<hr/>' +","                             '<button id=\"openimagebrowser\" data-editor=\"' + Y.Escape.html(elementid) + '\">' +","                             M.util.get_string('browserepositories', 'atto_image') +","                             '</button>' +","                             '<hr/>' +","                             '<button id=\"atto_image_urlentrysubmit\">' +","                             M.util.get_string('createimage', 'atto_image') +","                             '</button>' +","                             '</form>' +","                             '<hr/>' + M.util.get_string('accessibilityhint', 'atto_image'));","","        content.one('#atto_image_urlentrysubmit').on('click', M.atto_image.set_image);","        content.one('#openimagebrowser').on('click', M.atto_image.open_filepicker);","        return content;","    }","};","","","}, '@VERSION@', {\"requires\": [\"node\", \"escape\"]});","","}());"]};
}
var __cov_XlezB_BTI$HsoIEa2Ut2iA = __coverage__['lib/editor/atto/plugins/image/yui/build/moodle-atto_image-button/moodle-atto_image-button.js'];
__cov_XlezB_BTI$HsoIEa2Ut2iA.s['1']++;YUI.add('moodle-atto_image-button',function(Y,NAME){__cov_XlezB_BTI$HsoIEa2Ut2iA.f['1']++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['2']++;M.atto_image=(__cov_XlezB_BTI$HsoIEa2Ut2iA.b['1'][0]++,M.atto_image)||(__cov_XlezB_BTI$HsoIEa2Ut2iA.b['1'][1]++,{dialogue:null,selection:null,init:function(params){__cov_XlezB_BTI$HsoIEa2Ut2iA.f['2']++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['3']++;var display_chooser=function(e,elementid){__cov_XlezB_BTI$HsoIEa2Ut2iA.f['3']++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['4']++;e.preventDefault();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['5']++;if(!M.editor_atto.is_active(elementid)){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['2'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['6']++;M.editor_atto.focus(elementid);}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['2'][1]++;}__cov_XlezB_BTI$HsoIEa2Ut2iA.s['7']++;M.atto_image.selection=M.editor_atto.get_selection();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['8']++;if(M.atto_image.selection!==false){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['3'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['9']++;var dialogue;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['10']++;if(!M.atto_image.dialogue){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['4'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['11']++;dialogue=new M.core.dialogue({visible:false,modal:true,close:true,draggable:true});}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['4'][1]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['12']++;dialogue=M.atto_image.dialogue;}__cov_XlezB_BTI$HsoIEa2Ut2iA.s['13']++;dialogue.set('bodyContent',M.atto_image.get_form_content(elementid));__cov_XlezB_BTI$HsoIEa2Ut2iA.s['14']++;dialogue.set('headerContent',M.util.get_string('createimage','atto_image'));__cov_XlezB_BTI$HsoIEa2Ut2iA.s['15']++;dialogue.render();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['16']++;dialogue.centerDialogue();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['17']++;M.atto_image.dialogue=dialogue;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['18']++;var selectedText=M.editor_atto.get_selection_text();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['19']++;var i=0;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['20']++;var images=[];__cov_XlezB_BTI$HsoIEa2Ut2iA.s['21']++;for(i=0;i<selectedText.childNodes.length;i++){__cov_XlezB_BTI$HsoIEa2Ut2iA.s['22']++;var child=selectedText.childNodes[0];__cov_XlezB_BTI$HsoIEa2Ut2iA.s['23']++;if(images.length===0){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['5'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['24']++;if(child.nodeName.toLowerCase()==='img'){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['6'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['25']++;images[0]=child;}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['6'][1]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['26']++;if(child.getElementsByTagName){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['7'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['27']++;images=child.getElementsByTagName('img');}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['7'][1]++;}}}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['5'][1]++;}}__cov_XlezB_BTI$HsoIEa2Ut2iA.s['28']++;if(images.length>0){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['8'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['29']++;var image=Y.one(images[0]);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['30']++;var width=image.getAttribute('width');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['31']++;var height=image.getAttribute('height');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['32']++;if(width>0){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['9'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['33']++;Y.one('#atto_image_widthentry').set('value',width);}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['9'][1]++;}__cov_XlezB_BTI$HsoIEa2Ut2iA.s['34']++;if(height>0){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['10'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['35']++;Y.one('#atto_image_heightentry').set('value',height);}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['10'][1]++;}__cov_XlezB_BTI$HsoIEa2Ut2iA.s['36']++;Y.one('#atto_image_preview').set('src',image.get('src'));__cov_XlezB_BTI$HsoIEa2Ut2iA.s['37']++;Y.one('#atto_image_preview').setStyle('display','inline');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['38']++;Y.one('#atto_image_altentry').set('value',image.get('alt'));__cov_XlezB_BTI$HsoIEa2Ut2iA.s['39']++;Y.one('#atto_image_urlentry').set('value',image.get('src'));}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['8'][1]++;}__cov_XlezB_BTI$HsoIEa2Ut2iA.s['40']++;dialogue.show();}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['3'][1]++;}};__cov_XlezB_BTI$HsoIEa2Ut2iA.s['41']++;M.editor_atto.add_toolbar_button(params.elementid,'image',params.icon,display_chooser,this);},open_filepicker:function(e){__cov_XlezB_BTI$HsoIEa2Ut2iA.f['4']++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['42']++;var elementid=this.getAttribute('data-editor');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['43']++;e.preventDefault();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['44']++;M.editor_atto.show_filepicker(elementid,'image',M.atto_image.filepicker_callback);},filepicker_callback:function(params){__cov_XlezB_BTI$HsoIEa2Ut2iA.f['5']++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['45']++;if(params.url!==''){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['11'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['46']++;var input=Y.one('#atto_image_urlentry');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['47']++;input.set('value',params.url);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['48']++;input=Y.one('#atto_image_altentry');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['49']++;input.set('value',params.file);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['50']++;var image=new Image();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['51']++;image.onload=function(){__cov_XlezB_BTI$HsoIEa2Ut2iA.f['6']++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['52']++;Y.one('#atto_image_widthentry').set('value',this.width);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['53']++;Y.one('#atto_image_heightentry').set('value',this.height);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['54']++;Y.one('#atto_image_preview').set('src',this.src);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['55']++;Y.one('#atto_image_preview').setStyle('display','inline');};__cov_XlezB_BTI$HsoIEa2Ut2iA.s['56']++;image.src=params.url;}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['11'][1]++;}},set_image:function(e){__cov_XlezB_BTI$HsoIEa2Ut2iA.f['7']++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['57']++;e.preventDefault();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['58']++;M.atto_image.dialogue.hide();__cov_XlezB_BTI$HsoIEa2Ut2iA.s['59']++;var input=e.currentTarget.get('parentNode').one('#atto_image_urlentry');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['60']++;var url=input.get('value');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['61']++;input=e.currentTarget.get('parentNode').one('#atto_image_altentry');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['62']++;var alt=input.get('value');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['63']++;input=e.currentTarget.get('parentNode').one('#atto_image_widthentry');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['64']++;var width=input.get('value');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['65']++;input=e.currentTarget.get('parentNode').one('#atto_image_heightentry');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['66']++;var height=input.get('value');__cov_XlezB_BTI$HsoIEa2Ut2iA.s['67']++;if((__cov_XlezB_BTI$HsoIEa2Ut2iA.b['13'][0]++,url!=='')&&(__cov_XlezB_BTI$HsoIEa2Ut2iA.b['13'][1]++,alt!=='')){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['12'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['68']++;M.editor_atto.set_selection(M.atto_image.selection);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['69']++;var imagehtml='<img src="'+Y.Escape.html(url)+'" alt="'+Y.Escape.html(alt)+'"';__cov_XlezB_BTI$HsoIEa2Ut2iA.s['70']++;if(width){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['14'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['71']++;imagehtml+=' width="'+Y.Escape.html(width)+'"';}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['14'][1]++;}__cov_XlezB_BTI$HsoIEa2Ut2iA.s['72']++;if(height){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['15'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['73']++;imagehtml+=' height="'+Y.Escape.html(height)+'"';}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['15'][1]++;}__cov_XlezB_BTI$HsoIEa2Ut2iA.s['74']++;imagehtml+='"/>';__cov_XlezB_BTI$HsoIEa2Ut2iA.s['75']++;if((__cov_XlezB_BTI$HsoIEa2Ut2iA.b['17'][0]++,document.selection)&&(__cov_XlezB_BTI$HsoIEa2Ut2iA.b['17'][1]++,document.selection.createRange().pasteHTML)){__cov_XlezB_BTI$HsoIEa2Ut2iA.b['16'][0]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['76']++;document.selection.createRange().pasteHTML(imagehtml);}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['16'][1]++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['77']++;document.execCommand('insertHTML',false,imagehtml);}}else{__cov_XlezB_BTI$HsoIEa2Ut2iA.b['12'][1]++;}},get_form_content:function(elementid){__cov_XlezB_BTI$HsoIEa2Ut2iA.f['8']++;__cov_XlezB_BTI$HsoIEa2Ut2iA.s['78']++;var content=Y.Node.create('<form class="atto_form">'+'<label for="atto_image_urlentry">'+M.util.get_string('enterurl','atto_image')+'</label>'+'<input type="url" value="" id="atto_image_urlentry" size="32"/>'+'<label for="atto_image_altentry">'+M.util.get_string('enteralt','atto_image')+'</label>'+'<input type="text" value="" id="atto_image_altentry" size="32" required="true"/>'+'<label for="atto_image_widthentry">'+M.util.get_string('width','atto_image')+'</label>'+'<input type="text" value="" id="atto_image_widthentry" size="10"/>'+'<br/>'+'<label for="atto_image_heightentry">'+M.util.get_string('height','atto_image')+'</label>'+'<input type="text" value="" id="atto_image_heightentry" size="10"/>'+'<label for="atto_image_preview">'+M.util.get_string('preview','atto_image')+'</label>'+'<img src="#" width="200" id="atto_image_preview" alt="" style="display: none;"/>'+'<hr/>'+'<button id="openimagebrowser" data-editor="'+Y.Escape.html(elementid)+'">'+M.util.get_string('browserepositories','atto_image')+'</button>'+'<hr/>'+'<button id="atto_image_urlentrysubmit">'+M.util.get_string('createimage','atto_image')+'</button>'+'</form>'+'<hr/>'+M.util.get_string('accessibilityhint','atto_image'));__cov_XlezB_BTI$HsoIEa2Ut2iA.s['79']++;content.one('#atto_image_urlentrysubmit').on('click',M.atto_image.set_image);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['80']++;content.one('#openimagebrowser').on('click',M.atto_image.open_filepicker);__cov_XlezB_BTI$HsoIEa2Ut2iA.s['81']++;return content;}});},'@VERSION@',{'requires':['node','escape']});
