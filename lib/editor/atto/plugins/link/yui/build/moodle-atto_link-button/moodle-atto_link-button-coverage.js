if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['lib/editor/atto/plugins/link/yui/build/moodle-atto_link-button/moodle-atto_link-button.js']) {
   __coverage__['lib/editor/atto/plugins/link/yui/build/moodle-atto_link-button/moodle-atto_link-button.js'] = {"path":"lib/editor/atto/plugins/link/yui/build/moodle-atto_link-button/moodle-atto_link-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":35},"end":{"line":1,"column":54}}},"2":{"name":"(anonymous_2)","line":28,"loc":{"start":{"line":28,"column":11},"end":{"line":28,"column":28}}},"3":{"name":"(anonymous_3)","line":29,"loc":{"start":{"line":29,"column":30},"end":{"line":29,"column":53}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":22},"end":{"line":61,"column":33}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":22},"end":{"line":82,"column":34}}},"6":{"name":"(anonymous_6)","line":88,"loc":{"start":{"line":88,"column":26},"end":{"line":88,"column":43}}},"7":{"name":"(anonymous_7)","line":96,"loc":{"start":{"line":96,"column":15},"end":{"line":96,"column":27}}},"8":{"name":"(anonymous_8)","line":109,"loc":{"start":{"line":109,"column":23},"end":{"line":109,"column":43}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":132,"column":50}},"2":{"start":{"line":25,"column":0},"end":{"line":129,"column":2}},"3":{"start":{"line":29,"column":8},"end":{"line":57,"column":10}},"4":{"start":{"line":30,"column":12},"end":{"line":30,"column":31}},"5":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"6":{"start":{"line":32,"column":16},"end":{"line":32,"column":47}},"7":{"start":{"line":34,"column":12},"end":{"line":34,"column":66}},"8":{"start":{"line":35,"column":12},"end":{"line":56,"column":13}},"9":{"start":{"line":36,"column":16},"end":{"line":36,"column":29}},"10":{"start":{"line":37,"column":16},"end":{"line":46,"column":17}},"11":{"start":{"line":38,"column":20},"end":{"line":43,"column":23}},"12":{"start":{"line":45,"column":20},"end":{"line":45,"column":52}},"13":{"start":{"line":48,"column":16},"end":{"line":48,"column":34}},"14":{"start":{"line":49,"column":16},"end":{"line":49,"column":85}},"15":{"start":{"line":50,"column":16},"end":{"line":50,"column":92}},"16":{"start":{"line":52,"column":16},"end":{"line":52,"column":46}},"17":{"start":{"line":54,"column":16},"end":{"line":54,"column":32}},"18":{"start":{"line":55,"column":16},"end":{"line":55,"column":48}},"19":{"start":{"line":59,"column":8},"end":{"line":59,"column":103}},"20":{"start":{"line":63,"column":8},"end":{"line":65,"column":16}},"21":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"22":{"start":{"line":69,"column":12},"end":{"line":69,"column":19}},"23":{"start":{"line":72,"column":8},"end":{"line":72,"column":55}},"24":{"start":{"line":74,"column":8},"end":{"line":80,"column":9}},"25":{"start":{"line":75,"column":12},"end":{"line":75,"column":50}},"26":{"start":{"line":76,"column":12},"end":{"line":79,"column":13}},"27":{"start":{"line":77,"column":16},"end":{"line":77,"column":90}},"28":{"start":{"line":78,"column":16},"end":{"line":78,"column":63}},"29":{"start":{"line":83,"column":8},"end":{"line":83,"column":57}},"30":{"start":{"line":84,"column":8},"end":{"line":84,"column":27}},"31":{"start":{"line":86,"column":8},"end":{"line":86,"column":90}},"32":{"start":{"line":89,"column":8},"end":{"line":89,"column":36}},"33":{"start":{"line":90,"column":8},"end":{"line":94,"column":9}},"34":{"start":{"line":91,"column":12},"end":{"line":91,"column":63}},"35":{"start":{"line":92,"column":12},"end":{"line":92,"column":56}},"36":{"start":{"line":93,"column":12},"end":{"line":93,"column":66}},"37":{"start":{"line":97,"column":8},"end":{"line":97,"column":27}},"38":{"start":{"line":98,"column":8},"end":{"line":98,"column":36}},"39":{"start":{"line":100,"column":8},"end":{"line":100,"column":67}},"40":{"start":{"line":102,"column":8},"end":{"line":102,"column":39}},"41":{"start":{"line":103,"column":8},"end":{"line":107,"column":9}},"42":{"start":{"line":104,"column":12},"end":{"line":104,"column":63}},"43":{"start":{"line":105,"column":12},"end":{"line":105,"column":56}},"44":{"start":{"line":106,"column":12},"end":{"line":106,"column":61}},"45":{"start":{"line":110,"column":8},"end":{"line":123,"column":92}},"46":{"start":{"line":125,"column":8},"end":{"line":125,"column":83}},"47":{"start":{"line":126,"column":8},"end":{"line":126,"column":81}},"48":{"start":{"line":127,"column":8},"end":{"line":127,"column":23}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":14},"end":{"line":25,"column":25}},{"start":{"line":25,"column":29},"end":{"line":129,"column":1}}]},"2":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":12}},{"start":{"line":31,"column":12},"end":{"line":31,"column":12}}]},"3":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":12}},{"start":{"line":35,"column":12},"end":{"line":35,"column":12}}]},"4":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":16},"end":{"line":35,"column":47}},{"start":{"line":35,"column":52},"end":{"line":35,"column":84}}]},"5":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":16},"end":{"line":37,"column":16}},{"start":{"line":37,"column":16},"end":{"line":37,"column":16}}]},"6":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":68,"column":8}},{"start":{"line":68,"column":8},"end":{"line":68,"column":8}}]},"7":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":8}},{"start":{"line":74,"column":8},"end":{"line":74,"column":8}}]},"8":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":12},"end":{"line":76,"column":12}},{"start":{"line":76,"column":12},"end":{"line":76,"column":12}}]},"9":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":8},"end":{"line":90,"column":8}},{"start":{"line":90,"column":8},"end":{"line":90,"column":8}}]},"10":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":103,"column":8}},{"start":{"line":103,"column":8},"end":{"line":103,"column":8}}]}},"code":["(function () { YUI.add('moodle-atto_link-button', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/**"," * Atto text editor link plugin."," *"," * @package    editor-atto"," * @copyright  2013 Damyon Wiese  <damyon@moodle.com>"," * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","M.atto_link = M.atto_link || {","    dialogue : null,","    selection : null,","    init : function(params) {","        var display_chooser = function(e, elementid) {","            e.preventDefault();","            if (!M.editor_atto.is_active(elementid)) {","                M.editor_atto.focus(elementid);","            }","            M.atto_link.selection = M.editor_atto.get_selection();","            if (M.atto_link.selection !== false && (!M.atto_link.selection.collapsed)) {","                var dialogue;","                if (!M.atto_link.dialogue) {","                    dialogue = new M.core.dialogue({","                        visible: false,","                        modal: true,","                        close: true,","                        draggable: true","                    });","                } else {","                    dialogue = M.atto_link.dialogue;","                }","","                dialogue.render();","                dialogue.set('bodyContent', M.atto_link.get_form_content(elementid));","                dialogue.set('headerContent', M.util.get_string('createlink', 'atto_link'));","","                M.atto_link.resolve_anchors();","","                dialogue.show();","                M.atto_link.dialogue = dialogue;","            }","        };","","        M.editor_atto.add_toolbar_button(params.elementid, 'link', params.icon, display_chooser, this);","    },","    resolve_anchors : function() {","        // Find the first anchor tag in the selection.","        var selectednode = M.editor_atto.get_selection_parent_node(),","            anchornode,","            url;","","        // Note this is a document fragment and YUI doesn't like them.","        if (!selectednode) {","            return;","        }","","        anchornode = Y.one(selectednode).ancestor('a');","","        if (anchornode) {","            url = anchornode.getAttribute('href');","            if (url !== '') {","                M.atto_link.selection = M.editor_atto.get_selection_from_node(anchornode);","                Y.one('#atto_link_urlentry').set('value', url);","            }","        }","    },","    open_filepicker : function(e) {","        var elementid = this.getAttribute('data-editor');","        e.preventDefault();","","        M.editor_atto.show_filepicker(elementid, 'link', M.atto_link.filepicker_callback);","    },","    filepicker_callback : function(params) {","        M.atto_link.dialogue.hide();","        if (params.url !== '') {","            M.editor_atto.set_selection(M.atto_link.selection);","            document.execCommand('unlink', false, null);","            document.execCommand('createLink', false, params.url);","        }","    },","    set_link : function(e) {","        e.preventDefault();","        M.atto_link.dialogue.hide();","","        var input = e.currentTarget.get('parentNode').one('input');","","        var value = input.get('value');","        if (value !== '') {","            M.editor_atto.set_selection(M.atto_link.selection);","            document.execCommand('unlink', false, null);","            document.execCommand('createLink', false, value);","        }","    },","    get_form_content : function(elementid) {","        var content = Y.Node.create('<form>' +","                             '<label for=\"atto_link_urlentry\">' + M.util.get_string('enterurl', 'atto_link') +","                             '</label><br/>' +","                             '<input type=\"url\" value=\"\" id=\"atto_link_urlentry\" size=\"32\"/>' +","                             '<br/>' +","                             '<button id=\"openlinkbrowser\" data-editor=\"' + Y.Escape.html(elementid) + '\">' +","                             M.util.get_string('browserepositories', 'atto_link') +","                             '</button>' +","                             '<hr/>' +","                             '<button id=\"atto_link_urlentrysubmit\">' +","                             M.util.get_string('createlink', 'atto_link') +","                             '</button>' +","                             '</form>' +","                             '<hr/>' + M.util.get_string('accessibilityhint', 'atto_link'));","","        content.one('#atto_link_urlentrysubmit').on('click', M.atto_link.set_link);","        content.one('#openlinkbrowser').on('click', M.atto_link.open_filepicker);","        return content;","    }","};","","","}, '@VERSION@', {\"requires\": [\"node\", \"escape\"]});","","}());"]};
}
var __cov_RjkDdK$_E5cEMLtDMsAQ5w = __coverage__['lib/editor/atto/plugins/link/yui/build/moodle-atto_link-button/moodle-atto_link-button.js'];
__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['1']++;YUI.add('moodle-atto_link-button',function(Y,NAME){__cov_RjkDdK$_E5cEMLtDMsAQ5w.f['1']++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['2']++;M.atto_link=(__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['1'][0]++,M.atto_link)||(__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['1'][1]++,{dialogue:null,selection:null,init:function(params){__cov_RjkDdK$_E5cEMLtDMsAQ5w.f['2']++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['3']++;var display_chooser=function(e,elementid){__cov_RjkDdK$_E5cEMLtDMsAQ5w.f['3']++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['4']++;e.preventDefault();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['5']++;if(!M.editor_atto.is_active(elementid)){__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['2'][0]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['6']++;M.editor_atto.focus(elementid);}else{__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['2'][1]++;}__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['7']++;M.atto_link.selection=M.editor_atto.get_selection();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['8']++;if((__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['4'][0]++,M.atto_link.selection!==false)&&(__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['4'][1]++,!M.atto_link.selection.collapsed)){__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['3'][0]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['9']++;var dialogue;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['10']++;if(!M.atto_link.dialogue){__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['5'][0]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['11']++;dialogue=new M.core.dialogue({visible:false,modal:true,close:true,draggable:true});}else{__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['5'][1]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['12']++;dialogue=M.atto_link.dialogue;}__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['13']++;dialogue.render();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['14']++;dialogue.set('bodyContent',M.atto_link.get_form_content(elementid));__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['15']++;dialogue.set('headerContent',M.util.get_string('createlink','atto_link'));__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['16']++;M.atto_link.resolve_anchors();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['17']++;dialogue.show();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['18']++;M.atto_link.dialogue=dialogue;}else{__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['3'][1]++;}};__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['19']++;M.editor_atto.add_toolbar_button(params.elementid,'link',params.icon,display_chooser,this);},resolve_anchors:function(){__cov_RjkDdK$_E5cEMLtDMsAQ5w.f['4']++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['20']++;var selectednode=M.editor_atto.get_selection_parent_node(),anchornode,url;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['21']++;if(!selectednode){__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['6'][0]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['22']++;return;}else{__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['6'][1]++;}__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['23']++;anchornode=Y.one(selectednode).ancestor('a');__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['24']++;if(anchornode){__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['7'][0]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['25']++;url=anchornode.getAttribute('href');__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['26']++;if(url!==''){__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['8'][0]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['27']++;M.atto_link.selection=M.editor_atto.get_selection_from_node(anchornode);__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['28']++;Y.one('#atto_link_urlentry').set('value',url);}else{__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['8'][1]++;}}else{__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['7'][1]++;}},open_filepicker:function(e){__cov_RjkDdK$_E5cEMLtDMsAQ5w.f['5']++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['29']++;var elementid=this.getAttribute('data-editor');__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['30']++;e.preventDefault();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['31']++;M.editor_atto.show_filepicker(elementid,'link',M.atto_link.filepicker_callback);},filepicker_callback:function(params){__cov_RjkDdK$_E5cEMLtDMsAQ5w.f['6']++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['32']++;M.atto_link.dialogue.hide();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['33']++;if(params.url!==''){__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['9'][0]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['34']++;M.editor_atto.set_selection(M.atto_link.selection);__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['35']++;document.execCommand('unlink',false,null);__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['36']++;document.execCommand('createLink',false,params.url);}else{__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['9'][1]++;}},set_link:function(e){__cov_RjkDdK$_E5cEMLtDMsAQ5w.f['7']++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['37']++;e.preventDefault();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['38']++;M.atto_link.dialogue.hide();__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['39']++;var input=e.currentTarget.get('parentNode').one('input');__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['40']++;var value=input.get('value');__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['41']++;if(value!==''){__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['10'][0]++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['42']++;M.editor_atto.set_selection(M.atto_link.selection);__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['43']++;document.execCommand('unlink',false,null);__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['44']++;document.execCommand('createLink',false,value);}else{__cov_RjkDdK$_E5cEMLtDMsAQ5w.b['10'][1]++;}},get_form_content:function(elementid){__cov_RjkDdK$_E5cEMLtDMsAQ5w.f['8']++;__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['45']++;var content=Y.Node.create('<form>'+'<label for="atto_link_urlentry">'+M.util.get_string('enterurl','atto_link')+'</label><br/>'+'<input type="url" value="" id="atto_link_urlentry" size="32"/>'+'<br/>'+'<button id="openlinkbrowser" data-editor="'+Y.Escape.html(elementid)+'">'+M.util.get_string('browserepositories','atto_link')+'</button>'+'<hr/>'+'<button id="atto_link_urlentrysubmit">'+M.util.get_string('createlink','atto_link')+'</button>'+'</form>'+'<hr/>'+M.util.get_string('accessibilityhint','atto_link'));__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['46']++;content.one('#atto_link_urlentrysubmit').on('click',M.atto_link.set_link);__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['47']++;content.one('#openlinkbrowser').on('click',M.atto_link.open_filepicker);__cov_RjkDdK$_E5cEMLtDMsAQ5w.s['48']++;return content;}});},'@VERSION@',{'requires':['node','escape']});
