{"version":3,"sources":["../../../../../src/local/grades/local/grader/userpicker.js"],"names":["renderNavigator","context","Templates","render","renderUserChange","nextUser","items","index","displayIndex","Promise","all","html","js","replaceNodeContents","Selectors","regions","userDetail","previousUser","userList","currentUser","then"],"mappings":"8MAAA,OACA,O,8xBAaMA,CAAAA,CAAe,CAAG,SAACC,CAAD,CAAa,CACjC,MAAOC,WAAUC,MAAV,CAAiB,gDAAjB,CAAmEF,CAAnE,CACV,C,CAEKG,CAAgB,CAAG,SAACH,CAAD,CAAa,CAClC,MAAOC,WAAUC,MAAV,CAAiB,uDAAjB,CAA0EF,CAA1E,CACV,C,CAYKI,CAAQ,4CAAG,WAAMC,CAAN,CAAaC,CAAb,+FACbA,CAAK,GAELD,CAAK,CAACC,CAAD,CAAL,CAAaC,YAAb,CAA4BD,CAAK,EAAjC,CAHa,eAKUE,CAAAA,OAAO,CAACC,GAAR,CAAY,CAACN,CAAgB,CAACE,CAAK,CAACC,CAAD,CAAN,CAAjB,CAAZ,CALV,0BAKRI,CALQ,MAKFC,CALE,MAMbV,UAAUW,mBAAV,CAA8BC,UAAUC,OAAV,CAAkBC,UAAhD,CAA4DL,CAA5D,CAAkEC,CAAlE,EANa,wCAAH,uD,CAWRK,CAAY,4CAAG,WAAMX,CAAN,CAAaC,CAAb,+FACjBA,CAAK,GAELD,CAAK,CAACC,CAAD,CAAL,CAAaC,YAAb,CAA4BD,CAAK,EAAjC,CAHiB,eAKME,CAAAA,OAAO,CAACC,GAAR,CAAY,CAACN,CAAgB,CAACE,CAAK,CAACC,CAAD,CAAN,CAAjB,CAAZ,CALN,0BAKZI,CALY,MAKNC,CALM,MAMjBV,UAAUW,mBAAV,CAA8BC,UAAUC,OAAV,CAAkBC,UAAhD,CAA4DL,CAA5D,CAAkEC,CAAlE,EANiB,wCAAH,uD,8CAoBH,WAAMM,CAAN,CAAgBC,CAAhB,gHACgBV,CAAAA,OAAO,CAACC,GAAR,CAAY,CACnCV,CAAe,CAACmB,CAAD,CAAf,CAA6BC,IAA7B,CAAkC,SAACT,CAAD,CAAOC,CAAP,CAAc,CAC5C,MAAO,CAACD,IAAI,CAAJA,CAAD,CAAOC,EAAE,CAAFA,CAAP,CACV,CAFD,CADmC,CAAZ,CADhB,iCACHD,CADG,GACHA,IADG,CACGC,CADH,GACGA,EADH,0BAWJ,CAACD,IAAI,CAAJA,CAAD,CAAOC,EAAE,CAAFA,CAAP,CAXI,0C","sourcesContent":["import Templates from 'core/templates';\nimport Selectors from './userpicker/selectors';\n\nconst init = (items, index) => { // eslint-disable-line\n    // TODO generate the full name from PHP function.\n\n    return {\n        firstName: items[index].firstname,\n        lastName: items[index].lastname,\n        displayindex: index + 1,\n        total: items.length,\n    };\n};\n\nconst renderNavigator = (context) => {\n    return Templates.render('mod_forum/local/grades/local/grader/userpicker', context);\n};\n\nconst renderUserChange = (context) => {\n    return Templates.render('mod_forum/local/grades/local/grader/userpicker/detail', context);\n};\n\nconst _cacheDom = (html) => { // eslint-disable-line\n    let widget = document.createElement('div');\n    widget.innerHTML = html;\n    let paginator = widget.querySelector('[data-grader=\"paginator\"]');\n    let nextButton = paginator.querySelector('[data-action=\"next-user\"]');\n    let previousButton = paginator.querySelector('[data-action=\"previous-user\"]');\n    return [nextButton, previousButton];\n};\n\n// Use the next index or the given index here.\nconst nextUser = async(items, index) => {\n    index++;\n\n    items[index].displayIndex = index++;\n\n    let [html, js] = await Promise.all([renderUserChange(items[index])]);\n    Templates.replaceNodeContents(Selectors.regions.userDetail, html, js);\n\n    // PubSub\n};\n\nconst previousUser = async(items, index) => {\n    index--;\n\n    items[index].displayIndex = index++;\n\n    let [html, js] = await Promise.all([renderUserChange(items[index])]);\n    Templates.replaceNodeContents(Selectors.regions.userDetail, html, js);\n\n    // PubSub\n};\n\nconst bindEvents = (nextButton, previousButton, items, index) => { //eslint-disable-line\n    nextButton.addEventListener('click', function() {\n        nextUser(items, index);\n    });\n    previousButton.addEventListener('click', function() {\n        previousUser(items, index);\n    });\n};\n\nexport default async(userList, currentUser, showUserCallback) => { // eslint-disable-line\n    const [{html, js}] = await Promise.all([\n        renderNavigator(currentUser).then((html, js) => {\n            return {html, js};\n        })]\n    );\n\n    // TODO let [nextButton, previousButton] = _cacheDom(html);\n\n    // TODO bindEvents(nextButton, previousButton, items, index);\n\n    return {html, js};\n};\n"],"file":"userpicker.min.js"}