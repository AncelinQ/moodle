{"version":3,"sources":["../../../../../src/local/grades/local/grader/userpicker.js"],"names":["init","items","index","firstName","firstname","lastName","lastname","displayindex","total","length","renderNavigator","context","Templates","render","renderUserChange","_cacheDom","html","widget","document","createElement","innerHTML","paginator","querySelector","nextButton","previousButton","nextUser","displayIndex","Promise","all","js","replaceNodeContents","Selectors","regions","userDetail","previousUser","bindEvents","addEventListener","buildPicker"],"mappings":"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","sourcesContent":["import Templates from 'core/templates';\nimport Selectors from './userpicker/selectors';\n\nconst init = (items, index) => {\n    // TODO generate the full name from PHP function.\n\n    return {\n        firstName: items[index].firstname,\n        lastName: items[index].lastname,\n        displayindex: index + 1,\n        total: items.length,\n    };\n};\n\nconst renderNavigator = (context) => {\n    return Templates.render('mod_forum/local/grades/unified_grader/user_navigator', context);\n};\n\nconst renderUserChange = (context) => {\n    return Templates.render('mod_forum/local/grades/unified_grader/user_navigator_user', context);\n};\n\nconst _cacheDom = (html) => {\n    let widget = document.createElement('div');\n    widget.innerHTML = html;\n    let paginator = widget.querySelector('[data-grader=\"paginator\"]');\n    let nextButton = paginator.querySelector('[data-action=\"next-user\"]');\n    let previousButton = paginator.querySelector('[data-action=\"previous-user\"]');\n    return [nextButton, previousButton];\n};\n\n// Use the next index or the given index here.\nconst nextUser = async(items, index) => {\n    index++;\n\n    items[index].displayIndex = index++;\n\n    let [html, js] = await Promise.all([renderUserChange(items[index])]);\n    Templates.replaceNodeContents(Selectors.regions.userDetail, html, js);\n\n    // PubSub\n};\n\nconst previousUser = async(items, index) => {\n    index--;\n\n    items[index].displayIndex = index++;\n\n    let [html, js] = await Promise.all([renderUserChange(items[index])]);\n    Templates.replaceNodeContents(Selectors.regions.userDetail, html, js);\n\n    // PubSub\n};\n\nconst bindEvents = (nextButton, previousButton, items, index) => {\n    nextButton.addEventListener('click', function() {\n        nextUser(items, index);\n    });\n    previousButton.addEventListener('click', function() {\n        previousUser(items, index);\n    });\n};\n\nexport const buildPicker = async(items, index) => {\n    // TODO\n    let context = init(items, index);\n\n    let [html, js] = await Promise.all([renderNavigator(context)]);\n\n    let [nextButton, previousButton] = _cacheDom(html);\n\n    bindEvents(nextButton, previousButton, items, index);\n\n    return [html, js];\n};\n"],"file":"userpicker.min.js"}