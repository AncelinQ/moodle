{"version":3,"sources":["../../../../src/grades/local/grader/index.js"],"names":["getHelpers","configuration","gradingWindow","contentPane","querySelector","Selectors","regions","content","updateUserContentRegionForUser","userid","userContent","userContentFetcher","innerHTML","updateForUser","getCurrentUserId","currentUserNode","userSelector","currentUser","dataset","userId","registerEventListeners","addEventListener","e","target","matches","grader","forum","Launch","showUser","launch","initialUserId"],"mappings":"kMAWA,uD,GAEMA,CAAAA,CAAU,CAAG,SAACC,CAAD,CAAgBC,CAAhB,CAAkC,IAC3CC,CAAAA,CAAW,CAAGD,CAAa,CAACE,aAAd,CAA4BC,UAAUC,OAAV,CAAkBC,OAA9C,CAD6B,CAG3CC,CAA8B,CAAG,SAACC,CAAD,CAAY,CAC/C,GAAMC,CAAAA,CAAW,CAAGT,CAAa,CAACU,kBAAd,CAAiCF,CAAjC,CAApB,CACAN,CAAW,CAACS,SAAZ,CAAwBF,CAC3B,CANgD,CAQ3CG,CAAa,CAAG,SAACJ,CAAD,CAAY,CAE9BD,CAA8B,CAACC,CAAD,CAEjC,CAZgD,CAc3CK,CAAgB,CAAG,UAAM,CAC3B,GAAMC,CAAAA,CAAe,CAAGZ,CAAW,CAACC,aAAZ,CAA0BC,UAAUE,OAAV,CAAkBS,YAAlB,CAA+BC,WAAzD,CAAxB,CAEA,MAAOF,CAAAA,CAAe,CAACG,OAAhB,CAAwBC,MAClC,CAlBgD,CAiCjD,MAAO,CACHC,sBAAsB,CAdK,QAAzBA,CAAAA,sBAAyB,EAAM,CACjCjB,CAAW,CAACkB,gBAAZ,CAA6B,OAA7B,CAAsC,SAACC,CAAD,CAAO,CACzC,GAAIA,CAAC,CAACC,MAAF,CAASC,OAAT,CAAiBnB,UAAUoB,MAAV,CAAiBC,KAAjB,CAAuBC,MAAxC,CAAJ,CAAqD,CACjDd,CAAa,CAACC,CAAgB,EAAjB,CAChB,CACJ,CAJD,CAKH,CAOM,CAEHc,QAAQ,CAPK,QAAXA,CAAAA,QAAW,CAACnB,CAAD,CAAY,CAEzBI,CAAa,CAACJ,CAAD,CAChB,CAEM,CAIV,C,UAEqB,QAAToB,CAAAA,MAAS,CAAC5B,CAAD,CAAmB,IAI/BC,CAAAA,CAAa,CAAG,0BAAoB,EAApB,CAJe,GAWjCF,CAAU,CAACC,CAAD,CAAgBC,CAAhB,CAXuB,CASjCkB,CATiC,GASjCA,sBATiC,CAUjCQ,CAViC,GAUjCA,QAViC,CAarCR,CAAsB,GAEtB,GAAInB,CAAa,CAAC6B,aAAlB,CAAiC,CAE7BF,CAAQ,CAAC3B,CAAa,CAAC6B,aAAf,CACX,CACJ,C","sourcesContent":["/**\n * This is the grader index.\n * Note: This will likely be moved to core_grades/local/grader after 3.8, which is why it is currently located in\n * mod_forum/grades/local/grader.\n *\n * Please use relative module names for module imports for modules in the child directories.\n */\n\n// Note: The following function does not exist. It's just an example of what we want to do.\nimport {getFullScreenWindow} from 'core/windowing/fullscreen';\n\nimport Selectors from './selectors';\n\nconst getHelpers = (configuration, gradingWindow) => {\n    const contentPane = gradingWindow.querySelector(Selectors.regions.content);\n\n    const updateUserContentRegionForUser = (userid) => {\n        const userContent = configuration.userContentFetcher(userid);\n        contentPane.innerHTML = userContent;\n    };\n\n    const updateForUser = (userid) => {\n        // Update all regions for the user.\n        updateUserContentRegionForUser(userid);\n        // For example updateGradeRegionForUser(userid); .\n    };\n\n    const getCurrentUserId = () => {\n        const currentUserNode = contentPane.querySelector(Selectors.content.userSelector.currentUser);\n\n        return currentUserNode.dataset.userId;\n    };\n\n    const registerEventListeners = () => {\n        contentPane.addEventListener('click', (e) => {\n            if (e.target.matches(Selectors.grader.forum.Launch)) {\n                updateForUser(getCurrentUserId());\n            }\n        });\n    };\n\n    const showUser = (userid) => {\n        // Do something here to update the current display - i.e. set the user selector to show this user.\n        updateForUser(userid);\n    };\n\n    return {\n        registerEventListeners,\n        showUser,\n    };\n};\n\nexport const launch = (configuration) => {\n    // Note: This is a fictitious windowing layout manager. It doesn't exist (yet).\n    // TODO We can initially create this, but just have it create a full-screen modal if we want to do something really\n    // simple/basic for now.\n    const gradingWindow = getFullScreenWindow({\n        // There will likely be some arguments here.\n    });\n\n    const {\n        registerEventListeners,\n        showUser,\n    } = getHelpers(configuration, gradingWindow);\n\n    registerEventListeners();\n\n    if (configuration.initialUserId) {\n        // We were provided with an initial user. Load that user.\n        showUser(configuration.initialUserId);\n    }\n};\n"],"file":"index.min.js"}